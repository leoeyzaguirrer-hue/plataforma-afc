<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>MÃ³dulo 4 â€” Condicionamiento ClÃ¡sico Â· AFC Praxis</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Space+Mono:wght@400;700&family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,600;0,9..144,700;1,9..144,400&display=swap" rel="stylesheet">
<style>
:root,[data-theme="light"]{--bg:#f0f4f8;--bg2:#f7f9fc;--card:#fff;--card2:#f4f7fa;--text:#334155;--dim:#64748b;--bright:#0f172a;--muted:#94a3b8;--accent:#0891b2;--accent-b:#22d3ee;--accent-g:rgba(8,145,178,0.06);--accent-l:#cffafe;--gold:#d97706;--gold-b:#f59e0b;--gold-g:rgba(217,119,6,0.06);--green:#059669;--green-b:#10b981;--green-g:rgba(5,150,105,0.06);--red:#dc2626;--red-b:#ef4444;--red-g:rgba(220,38,38,0.05);--purple:#7c3aed;--purple-g:rgba(124,58,237,0.05);--border:rgba(15,23,42,0.08);--border2:rgba(15,23,42,0.04);--shadow:0 2px 8px rgba(0,0,0,0.06);--shadow-lg:0 8px 30px rgba(0,0,0,0.08);--overlay:rgba(255,255,255,0.92);--r:14px;--rs:10px}
[data-theme="dark"]{--bg:#0f172a;--bg2:#1e293b;--card:#1e293b;--card2:#334155;--text:#cbd5e1;--dim:#94a3b8;--bright:#f1f5f9;--muted:#64748b;--accent:#22d3ee;--accent-b:#67e8f9;--accent-g:rgba(34,211,238,0.1);--accent-l:#164e63;--gold:#fbbf24;--gold-b:#fcd34d;--gold-g:rgba(251,191,36,0.08);--green:#34d399;--green-b:#6ee7b7;--green-g:rgba(52,211,153,0.08);--red:#f87171;--red-b:#fca5a5;--red-g:rgba(248,113,113,0.08);--purple:#a78bfa;--purple-g:rgba(167,139,250,0.08);--border:rgba(148,163,184,0.12);--border2:rgba(148,163,184,0.06);--shadow:0 2px 8px rgba(0,0,0,0.2);--shadow-lg:0 8px 30px rgba(0,0,0,0.3);--overlay:rgba(15,23,42,0.95);--r:14px;--rs:10px}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}:focus-visible{outline:2px solid var(--accent);outline-offset:2px;border-radius:4px}html,body{height:100%;overflow:hidden;background:var(--bg);color:var(--text);font-family:'DM Sans',system-ui,sans-serif;font-size:18px;line-height:1.65;transition:background .3s,color .3s}.app{position:fixed;inset:0;display:flex;flex-direction:column;z-index:1}
.top{display:flex;align-items:center;gap:10px;padding:10px 16px;height:56px;background:var(--overlay);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid var(--border);flex-shrink:0;z-index:20}.top-back{width:38px;height:38px;border-radius:10px;background:var(--bg);border:1px solid var(--border);color:var(--accent);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .15s;flex-shrink:0}.top-back:hover{background:var(--accent-g);border-color:var(--accent)}.top-back svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:2.5;stroke-linecap:round;stroke-linejoin:round}.top-t{font-family:'Fraunces',serif;font-size:16px;font-weight:600;color:var(--bright);line-height:1.2}.top-s{font-size:12px;color:var(--dim)}.top-prog{margin-left:auto;display:flex;align-items:center;gap:6px;flex-shrink:0}.top-prog-bar{width:52px;height:5px;border-radius:3px;background:var(--border);overflow:hidden}.top-prog-fill{height:100%;background:var(--accent);border-radius:3px;transition:width .4s}.top-prog-pct{font-family:'Space Mono',monospace;font-size:11px;color:var(--dim)}.top-acts{display:flex;gap:4px;flex-shrink:0}.top-btn{width:36px;height:36px;border-radius:8px;background:transparent;border:1px solid var(--border);color:var(--dim);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .15s}.top-btn:hover{color:var(--accent);border-color:var(--accent);background:var(--accent-g)}.top-btn svg{width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:2}
.cnt{flex:1;overflow-y:auto;overflow-x:hidden;padding:20px 16px 110px;-webkit-overflow-scrolling:touch}.cnt::-webkit-scrollbar{width:3px}.cnt::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}.bot{position:fixed;bottom:0;left:0;right:0;padding:10px 16px;padding-bottom:max(10px,env(safe-area-inset-bottom));background:var(--overlay);backdrop-filter:blur(12px);border-top:1px solid var(--border2);z-index:20;display:flex;gap:8px}
.btn{flex:1;padding:14px 20px;border-radius:var(--rs);font-family:'DM Sans',sans-serif;font-size:16px;font-weight:600;border:none;cursor:pointer;transition:all .15s;text-align:center;display:inline-flex;align-items:center;justify-content:center;gap:6px}.btn:active{transform:scale(0.97)}.btn-p{background:var(--accent);color:#fff;box-shadow:0 2px 10px rgba(8,145,178,0.2)}.btn-p:disabled{opacity:.35;pointer-events:none}.btn-g{background:var(--green);color:#fff}.btn-o{background:var(--card);color:var(--text);border:1px solid var(--border);flex:none}.btn-w{background:var(--gold);color:#fff}.btn-sm{flex:none;padding:10px 16px;font-size:14px}.btn-icon{flex:none;width:44px;padding:0}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:22px;margin-bottom:14px;box-shadow:var(--shadow)}.tag{font-family:'Space Mono',monospace;font-size:11px;text-transform:uppercase;letter-spacing:1px;display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:6px;margin-bottom:10px}.tag-b{color:var(--accent);background:var(--accent-g)}.tag-g{color:var(--gold);background:var(--gold-g)}.tag-gr{color:var(--green);background:var(--green-g)}.tag-p{color:var(--purple);background:var(--purple-g)}.card-t{font-family:'Fraunces',serif;font-size:22px;font-weight:700;color:var(--bright);line-height:1.3;margin-bottom:6px}.card-d{font-size:16px;color:var(--dim);line-height:1.6}
.prose{font-size:16px;color:var(--text);line-height:1.75}.prose p{margin-bottom:10px}.prose b,.prose strong{color:var(--bright)}.callout{background:var(--accent-g);border-left:3px solid var(--accent);padding:14px 16px;border-radius:0 var(--rs) var(--rs) 0;margin:12px 0;font-size:15px;color:var(--bright);line-height:1.65}.callout em{color:var(--accent);font-style:normal;font-weight:600}.callout-g{background:var(--gold-g);border-color:var(--gold)}.callout-g em{color:var(--gold)}.callout-r{background:var(--red-g);border-color:var(--red)}.callout-r em{color:var(--red)}.ex-box{background:var(--bg2);border:1px solid var(--border);border-radius:var(--rs);padding:14px 16px;margin:12px 0}.ex-box-l{font-size:11px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:.8px;margin-bottom:4px}.ex-box p{font-size:15px;color:var(--text);margin:0;line-height:1.6}
.movie{background:linear-gradient(135deg,var(--gold-g),var(--accent-g));border:1.5px solid var(--border);border-radius:var(--r);padding:18px;margin:14px 0}.movie-h{font-family:'Fraunces',serif;font-size:15px;font-weight:700;margin-bottom:8px}.movie-h.h1{color:var(--gold)}.movie-h.h2{color:var(--accent)}.movie-h.h3{color:var(--purple)}.movie p{font-size:15px;line-height:1.7;color:var(--text);margin-bottom:6px}.movie table{width:100%;border-collapse:collapse;margin:8px 0;font-size:14px}.movie td{padding:6px 10px;border-bottom:1px solid var(--border2)}.movie td:first-child{color:var(--dim);width:45%}.movie td:last-child{color:var(--bright);font-weight:500;font-family:'Space Mono',monospace;font-size:13px}
.diag{background:var(--bg2);border:1.5px solid var(--border);border-radius:var(--r);padding:18px;margin:14px 0;text-align:center;font-size:15px;line-height:2.2;color:var(--bright);font-weight:500}.diag .arrow{color:var(--accent);font-weight:700;margin:0 4px}.diag .label{font-family:'Space Mono',monospace;font-size:11px;color:var(--dim);display:block;margin-top:6px;text-transform:uppercase;letter-spacing:1px}.diag .phase{padding:6px 12px;border-radius:8px;display:inline-block;margin:4px 0}.diag .ph-before{background:var(--accent-g);color:var(--accent)}.diag .ph-during{background:var(--gold-g);color:var(--gold)}.diag .ph-after{background:var(--green-g);color:var(--green)}
.acc{border:1px solid var(--border);border-radius:var(--rs);margin-bottom:8px;overflow:hidden;background:var(--card)}.acc-h{display:flex;align-items:center;gap:10px;padding:14px 16px;cursor:pointer;user-select:none}.acc-i{width:30px;height:30px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}.acc-l{font-weight:600;font-size:16px;color:var(--bright);flex:1}.acc-a{font-size:10px;color:var(--muted);transition:transform .3s}.acc.open .acc-a{transform:rotate(180deg)}.acc-b{max-height:0;overflow:hidden;transition:max-height .4s ease}.acc.open .acc-b{max-height:6000px}.acc-in{padding:0 16px 16px}
.tp-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.3);z-index:25;display:none}.tp-overlay.open{display:block}.tp{position:fixed;top:56px;right:0;bottom:0;width:88%;max-width:420px;background:var(--card);border-left:1px solid var(--border);z-index:30;overflow-y:auto;padding:20px;box-shadow:-4px 0 20px rgba(0,0,0,0.1);display:none}.tp.open{display:block}.tp-close{position:absolute;top:12px;right:12px;cursor:pointer;font-size:22px;color:var(--dim);background:none;border:none}
.lcard{display:flex;align-items:center;gap:14px;background:var(--card);border:1.5px solid var(--border);border-radius:var(--r);padding:16px 18px;margin-bottom:10px;cursor:pointer;transition:all .2s;box-shadow:var(--shadow)}.lcard:hover:not(.locked){border-color:rgba(8,145,178,0.2);box-shadow:var(--shadow-lg)}.lcard:active:not(.locked){transform:scale(0.98)}.lcard.locked{opacity:.35;pointer-events:none}.lcard.done{border-color:rgba(5,150,105,0.2)}.lcard-icon{width:50px;height:50px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:24px;flex-shrink:0}.lcard.done .lcard-icon{background:var(--green-g)!important}.lcard-name{font-weight:600;font-size:16px;color:var(--bright);margin-bottom:2px}.lcard-sub{font-size:13px;color:var(--dim)}.lcard-arrow{color:var(--muted);margin-left:auto;font-size:20px}.lbar{width:100%;height:4px;border-radius:2px;background:var(--border);margin-top:6px;overflow:hidden}.lbar-f{height:100%;border-radius:2px;transition:width .4s}
.pips{display:flex;align-items:center;gap:3px;justify-content:center;margin-bottom:16px;flex-wrap:wrap}.pip{width:18px;height:5px;border-radius:3px;background:var(--border);transition:all .3s}.pip.ok{background:var(--green)}.pip.fail{background:var(--red)}.pip.cur{background:var(--accent);width:26px}
.streak{display:inline-flex;align-items:center;gap:3px;font-family:'Space Mono',monospace;font-size:13px;font-weight:700;color:var(--gold);background:var(--gold-g);padding:4px 10px;border-radius:6px;margin-left:8px;animation:streakPop .3s ease}.streak.hide{display:none}@keyframes streakPop{from{transform:scale(0.7);opacity:0}to{transform:scale(1);opacity:1}}
.q-h{display:flex;align-items:center;gap:8px;margin-bottom:8px}.q-type{font-size:22px}.q-tag{font-family:'Space Mono',monospace;font-size:10px;text-transform:uppercase;letter-spacing:1px;color:var(--accent);padding:3px 8px;background:var(--accent-g);border-radius:4px}.q-n{font-family:'Space Mono',monospace;font-size:11px;color:var(--muted);margin-left:auto}.q-text{font-size:18px;font-weight:500;color:var(--bright);margin-bottom:16px;line-height:1.55}.q-ctx{font-size:15px;color:var(--dim);font-style:italic;margin-bottom:14px;padding:12px 14px;background:var(--bg2);border-radius:var(--rs);border-left:3px solid var(--border)}
.opt{display:flex;align-items:flex-start;gap:12px;padding:14px 16px;border:1.5px solid var(--border);border-radius:var(--rs);margin-bottom:7px;cursor:pointer;transition:all .2s;user-select:none}.opt:active{transform:scale(0.98)}.opt:hover:not(.dis){background:var(--bg2)}.opt.pick{border-color:var(--accent);background:var(--accent-g)}.opt.ok{border-color:var(--green);background:var(--green-g)}.opt.bad{border-color:var(--red);background:var(--red-g)}.opt.rev{border-color:var(--green);background:var(--green-g);opacity:.5}.opt.dis{pointer-events:none}.opt-m{width:24px;height:24px;border-radius:50%;border:2px solid var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:12px;font-weight:700;color:var(--muted);transition:all .2s}.opt.pick .opt-m{border-color:var(--accent);color:var(--accent);background:var(--accent-g)}.opt.ok .opt-m{border-color:var(--green);color:#fff;background:var(--green)}.opt.bad .opt-m{border-color:var(--red);color:#fff;background:var(--red)}.opt-t{font-size:16px;color:var(--text);line-height:1.5;flex:1}
.tf{display:flex;gap:10px;margin-bottom:8px}.tf-b{flex:1;padding:18px;border:2px solid var(--border);border-radius:var(--rs);font-size:18px;font-weight:600;text-align:center;cursor:pointer;transition:all .15s;background:var(--card);color:var(--text)}.tf-b:active{transform:scale(0.97)}.tf-b:hover:not(.dis){border-color:var(--accent);background:var(--accent-g)}.tf-b.ok{border-color:var(--green);background:var(--green-g);color:var(--green)}.tf-b.bad{border-color:var(--red);background:var(--red-g);color:var(--red)}.tf-b.dis{pointer-events:none}
.cl-cats{display:flex;gap:8px;flex-wrap:wrap}.cl-c{padding:10px 18px;border-radius:8px;font-size:15px;font-weight:500;border:1.5px solid var(--border);background:var(--card);color:var(--text);cursor:pointer;transition:all .15s}.cl-c:active{transform:scale(0.96)}.cl-c.ok{border-color:var(--green);background:var(--green-g);color:var(--green)}.cl-c.bad{border-color:var(--red);background:var(--red-g);color:var(--red)}.cl-c.dis{pointer-events:none}
.mat-w{display:flex;gap:12px;align-items:flex-start;margin-bottom:12px}.mat-c{flex:1;display:flex;flex-direction:column;gap:6px}.mat-i{padding:12px;border-radius:var(--rs);font-size:14px;border:1.5px solid var(--border);background:var(--card);color:var(--text);cursor:pointer;transition:all .15s;text-align:center}.mat-i:hover:not(.dis){border-color:var(--accent)}.mat-i.sel{border-color:var(--accent);background:var(--accent-g);color:var(--accent)}.mat-i.ok{border-color:var(--green);background:var(--green-g);color:var(--green)}.mat-i.bad{border-color:var(--red);background:var(--red-g);color:var(--red)}.mat-i.dis{pointer-events:none}
.ord-bank{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}.ord-item{padding:10px 16px;border:1.5px solid var(--border);border-radius:var(--rs);font-size:15px;background:var(--card);color:var(--text);cursor:pointer;transition:all .2s;user-select:none}.ord-item:hover:not(.dis){border-color:var(--accent);background:var(--accent-g)}.ord-item:active:not(.dis){transform:scale(0.95)}.ord-item.placed{opacity:.3;pointer-events:none}.ord-item.dis{pointer-events:none}.ord-seq{display:flex;flex-direction:column;gap:6px;min-height:48px;margin-bottom:8px}.ord-slot{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:var(--rs);background:var(--bg2);border:1.5px dashed var(--border);font-size:15px;color:var(--bright);transition:all .2s}.ord-slot .ord-num{width:28px;height:28px;border-radius:50%;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-family:'Space Mono',monospace;font-size:13px;font-weight:700;flex-shrink:0}.ord-slot.ok{border-color:var(--green);border-style:solid;background:var(--green-g)}.ord-slot.ok .ord-num{background:var(--green)}.ord-slot.bad{border-color:var(--red);border-style:solid;background:var(--red-g)}.ord-slot.bad .ord-num{background:var(--red)}
.fill-diag{background:var(--bg2);border:1.5px solid var(--border);border-radius:var(--r);padding:20px;margin-bottom:14px;text-align:center;font-size:16px;line-height:2.4;color:var(--bright)}.fill-blank{display:inline-flex;align-items:center;justify-content:center;min-width:120px;height:36px;border:2px dashed var(--accent);border-radius:8px;background:var(--card);color:var(--accent);font-weight:600;font-size:14px;margin:2px 4px;padding:0 10px;cursor:pointer;transition:all .2s;vertical-align:middle}.fill-blank.filled{border-style:solid;background:var(--accent-g)}.fill-blank.ok{border-color:var(--green);background:var(--green-g);color:var(--green)}.fill-blank.bad{border-color:var(--red);background:var(--red-g);color:var(--red)}.fill-bank{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:10px}.fill-opt{padding:8px 16px;border:1.5px solid var(--border);border-radius:8px;font-size:14px;font-weight:500;background:var(--card);color:var(--text);cursor:pointer;transition:all .15s}.fill-opt:hover:not(.dis):not(.used){border-color:var(--accent);background:var(--accent-g)}.fill-opt.used{opacity:.3;pointer-events:none}.fill-opt.dis{pointer-events:none}
.pat{background:var(--card);border:1.5px solid rgba(217,119,6,0.15);border-radius:var(--r);padding:18px;margin-bottom:14px;box-shadow:0 2px 10px rgba(217,119,6,0.04)}.pat-h{display:flex;align-items:center;gap:12px;margin-bottom:12px}.pat-av{width:48px;height:48px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:700;color:#fff;flex-shrink:0}.pat-av.f{background:linear-gradient(135deg,#db2777,#f472b6)}.pat-av.m{background:linear-gradient(135deg,#2563eb,#60a5fa)}.pat-av.c{background:linear-gradient(135deg,#d97706,#fbbf24)}.pat-name{font-family:'Fraunces',serif;font-size:18px;font-weight:700;color:var(--bright)}.pat-age{font-size:12px;color:var(--dim)}.pat-badge{font-family:'Space Mono',monospace;font-size:9px;text-transform:uppercase;letter-spacing:.8px;padding:3px 8px;border-radius:4px;background:var(--gold-g);color:var(--gold);border:1px solid rgba(217,119,6,0.12);margin-left:auto}.pat-q{font-size:16px;font-style:italic;color:var(--text);line-height:1.65;padding:12px 14px;background:var(--bg2);border-radius:var(--rs);border-left:3px solid var(--gold)}
.fb{padding:14px 16px;border-radius:var(--rs);margin-top:12px;font-size:15px;line-height:1.6;display:none}.fb.show{display:block;animation:fbIn .3s ease}@keyframes fbIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.fb.fbok{background:var(--green-g);border:1px solid rgba(5,150,105,0.15);color:var(--green)}.fb.fbfail{background:var(--red-g);border:1px solid rgba(220,38,38,0.1);color:var(--red)}[data-theme="dark"] .fb.fbok{color:var(--green-b)}[data-theme="dark"] .fb.fbfail{color:var(--red-b)}.fb strong{display:block;margin-bottom:3px;font-size:14px}.fb-bonus{margin-top:8px;padding:8px 12px;background:var(--accent-g);border-radius:6px;font-size:13px;color:var(--accent)}.fb-rule{margin-top:8px;padding:8px 12px;background:var(--purple-g);border-radius:6px;font-size:13px;color:var(--purple)}
.gate{text-align:center;padding:20px}.gate-ic{font-size:52px;margin-bottom:10px}.gate-t{font-family:'Fraunces',serif;font-size:24px;font-weight:700;color:var(--bright);margin-bottom:6px}.gate-d{font-size:15px;color:var(--dim);margin-bottom:16px;max-width:320px;margin-left:auto;margin-right:auto}.gate-bar{width:200px;height:8px;border-radius:4px;background:var(--border);margin:0 auto 8px;overflow:hidden}.gate-bar-f{height:100%;border-radius:4px}.gate-sc{font-family:'Space Mono',monospace;font-size:15px;font-weight:700;margin-bottom:16px}
.sum-c{width:130px;height:130px;border-radius:50%;border:5px solid var(--border);display:flex;flex-direction:column;align-items:center;justify-content:center;margin:16px auto}.sum-c.great{border-color:var(--green)}.sum-c.mid{border-color:var(--gold)}.sum-c.low{border-color:var(--red)}.sum-n{font-family:'Space Mono',monospace;font-size:40px;font-weight:700;color:var(--bright)}.sum-t{font-size:13px;color:var(--dim)}.sum-msg{text-align:center;font-family:'Fraunces',serif;font-size:22px;font-weight:600;color:var(--bright);margin:10px 0 4px}.sum-sub{text-align:center;font-size:14px;color:var(--dim);margin-bottom:14px}
.sk-grid{display:flex;flex-direction:column;gap:6px;margin:12px 0}.sk-r{display:flex;align-items:center;gap:8px;font-size:14px}.sk-name{flex:1;color:var(--text)}.sk-bar{width:80px;height:5px;border-radius:3px;background:var(--border);overflow:hidden}.sk-bar-f{height:100%;border-radius:3px}.sk-pct{font-family:'Space Mono',monospace;font-size:12px;font-weight:700;width:36px;text-align:right}
.rev{background:var(--red-g);border:1px solid rgba(220,38,38,0.08);border-radius:var(--rs);padding:10px 12px;margin-bottom:6px}.rev-q{font-size:14px;color:var(--bright);margin-bottom:3px}.rev-a{font-size:13px;color:var(--green)}
.cheat{background:var(--card);border:1.5px solid var(--accent);border-radius:var(--r);padding:18px;margin-top:14px}.cheat-t{font-family:'Fraunces',serif;font-size:16px;font-weight:700;color:var(--accent);margin-bottom:8px}.cheat-i{font-size:14px;color:var(--text);padding:5px 0;border-bottom:1px solid var(--border2)}
.ring{position:relative;display:inline-flex;align-items:center;justify-content:center}.ring svg{transform:rotate(-90deg)}.ring-v{position:absolute;font-family:'Space Mono',monospace;font-size:20px;font-weight:700;color:var(--bright)}
@keyframes up{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}.anim{animation:up .35s ease forwards}.d1{animation-delay:.06s;opacity:0}.d2{animation-delay:.12s;opacity:0}.d3{animation-delay:.18s;opacity:0}@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}.shake{animation:shake .35s ease}@keyframes confDrop{0%{transform:translateY(-20px) rotate(0);opacity:1}100%{transform:translateY(50vh) rotate(720deg);opacity:0}}
@media(min-width:640px){body{font-size:18px}.cnt{padding:24px 24px 100px}.card{padding:24px 28px}}@media(min-width:768px){.app{max-width:700px;margin:0 auto;left:50%;transform:translateX(-50%);right:auto;width:100%;border-left:1px solid var(--border2);border-right:1px solid var(--border2)}.top,.bot{max-width:700px;left:50%;transform:translateX(-50%);right:auto;width:100%}.cnt{padding:28px 32px 110px}}@media(min-width:1024px){.app{max-width:780px}.top,.bot{max-width:780px}body{font-size:19px}}
</style>
</head>
<body>
<div class="app" id="app"></div>
<div id="confWrap" style="position:fixed;top:0;left:0;right:0;height:50vh;pointer-events:none;z-index:999;overflow:hidden"></div>
<script>
const IC={back:'<svg viewBox="0 0 24 24"><polyline points="15 18 9 12 15 6"/></svg>',book:'<svg viewBox="0 0 24 24"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>',moon:'<svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>',sun:'<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',x:'<svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>',refresh:'<svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>'};
const MASTERY=0.8,SKEY='afcp_',LVL_N=['La triple contingencia','Los 4 procedimientos','ExtinciÃ³n y programas','Control de estÃ­mulos','Casos clÃ­nicos'],LVL_E=['ğŸ¯','âš¡','ğŸ“‰','ğŸ”¦','ğŸ¥'],LVL_C=['var(--accent)','var(--gold)','var(--purple)','#059669','#db2777'];
let MOD=null,$a=null,streak=0,S={view:'home',mod:'m4',level:0,exIdx:0,seqIdx:0,pool:[],answers:{},tpOpen:false},P={};
function sKey(){return SKEY+S.mod}function loadP(){try{const d=localStorage.getItem(sKey());if(d)P=JSON.parse(d)}catch(e){}if(!P.scores)P.scores={};if(!P.errors)P.errors={};if(!P.skills)P.skills={}}function saveP(){try{localStorage.setItem(sKey(),JSON.stringify(P))}catch(e){}}
function isDk(){return document.documentElement.getAttribute('data-theme')==='dark'}function togDk(){const d=isDk()?'light':'dark';document.documentElement.setAttribute('data-theme',d);localStorage.setItem(SKEY+'theme',d);render()}
(function(){const t=localStorage.getItem(SKEY+'theme');if(t)document.documentElement.setAttribute('data-theme',t)})();
const $=id=>document.getElementById(id);function shuffle(a){const r=[...a];for(let i=r.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[r[i],r[j]]=[r[j],r[i]]}return r}function fireConfetti(){const w=$('confWrap');const cols=['#059669','#0891b2','#d97706','#db2777','#7c3aed'];for(let i=0;i<25;i++){const c=document.createElement('div');c.style.cssText=`position:absolute;width:${4+Math.random()*6}px;height:${4+Math.random()*6}px;left:${Math.random()*100}%;background:${cols[i%5]};border-radius:2px;animation:confDrop 1.2s ease-out ${Math.random()*0.3}s forwards;opacity:0;`;w.appendChild(c);setTimeout(()=>c.remove(),1600)}}

// ========== MODULE 4 DATA ==========

// ========== MODULE 5 DATA ==========
const MODULE={id:'m5',phase:'Fase 2 Â· Componentes',title:'Condicionamiento Operante',description:'La conducta controlada por sus consecuencias: reforzamiento, castigo, extinciÃ³n, programas y control de estÃ­mulos.',icon:'âš¡',color:'#059669',colorB:'#10b981',
levels:[
// ===== LEVEL 1: LA TRIPLE CONTINGENCIA =====
{title:'La conducta y sus consecuencias',description:'De Thorndike a Skinner: cÃ³mo las consecuencias controlan la conducta. Los tres elementos: Ed â†’ R â†’ C.',showCount:10,
cheat:['Operante: conducta cuya probabilidad depende de sus consecuencias','Ed (discriminativo): seÃ±ala la disponibilidad de la consecuencia','R (operante): la conducta que opera sobre el ambiente','C (consecuencia): modifica la probabilidad futura de R','Triple contingencia: Ed â†’ R â†’ C','Una operante se define por su funciÃ³n (efecto), no por su topografÃ­a (forma)','Reforzador: evento que al ser contingente con R aumenta su probabilidad','LÃ­nea base: frecuencia de la conducta antes de intervenir'],
theory:[
{icon:'ğŸ›ï¸',title:'De Thorndike a Skinner: nace el CO',color:'accent',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ La pelÃ­cula</div><p>Imagina un gato hambriento encerrado en una jaula. Fuera hay comida. El gato araÃ±a, empuja, maÃºlla... hasta que <b>por casualidad</b> pisa una palanca y la puerta se abre. ğŸ±ğŸšª La primera vez tarda 5 minutos. La segunda, 3. La dÃ©cima, lo hace en segundos.</p><p><b>Thorndike</b> observÃ³ esto y formulÃ³ la <b>Ley del Efecto</b> (1898): las respuestas seguidas de consecuencias satisfactorias se fortalecen; las seguidas de consecuencias molestas se debilitan.</p><p>DÃ©cadas despuÃ©s, <b>Skinner</b> refinÃ³ esta idea: no importa si la consecuencia es "satisfactoria" en algÃºn sentido subjetivo â€” lo que importa es su <b>efecto observable sobre la probabilidad</b> de la conducta. Si la conducta aumenta â†’ la consecuencia es un reforzador. Si disminuye â†’ es un castigo. Punto.</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>El gato pisa la palanca</td><td>Respuesta operante (R)</td></tr><tr><td>La puerta se abre + comida</td><td>Consecuencia reforzante (C)</td></tr><tr><td>La jaula (contexto)</td><td>EstÃ­mulo discriminativo (Ed)</td></tr><tr><td>Cada vez mÃ¡s rÃ¡pido</td><td>Aumento de probabilidad</td></tr></table></div><div class="movie"><div class="movie-h h3">ğŸ”‘ La regla</div><p>La conducta operante es aquella cuya <b>probabilidad de emisiÃ³n futura</b> queda afectada por sus consecuencias. A diferencia de la respondiente (CC), la operante no es elicitada por un estÃ­mulo â€” es <b>emitida</b> por el organismo y seleccionada por el ambiente.</p></div>'},
{icon:'ğŸ”º',title:'La triple contingencia: Ed â†’ R â†’ C',color:'gold',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ La pelÃ­cula</div><p><b>Marcos</b>, 8 aÃ±os, estÃ¡ en clase. La profesora pregunta algo que sabe. Levanta la mano âœ‹. La profesora le da la palabra y Marcos responde bien. La profesora dice "Â¡Muy bien, Marcos!" ğŸ‘</p><p>Â¿QuÃ© pasarÃ­a si la profesora <b>nunca</b> estuviera? Marcos no levantarÃ­a la mano. Â¿Y si levantara la mano pero <b>nunca</b> le dieran la palabra? DejarÃ­a de hacerlo. Cada pieza es necesaria.</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Profesora pregunta algo que sabe</td><td><b>Ed</b> (discriminativo)</td></tr><tr><td>Marcos levanta la mano</td><td><b>R</b> (respuesta operante)</td></tr><tr><td>"Â¡Muy bien, Marcos!"</td><td><b>C</b> (consecuencia reforzante)</td></tr></table></div><div class="diag"><span class="phase ph-before">ğŸ“‹ Ed</span> <span class="arrow">â†’</span> <span class="phase ph-during">âœ‹ R</span> <span class="arrow">â†’</span> <span class="phase ph-after">ğŸ‘ C</span><br><span class="label">â”€â”€ la triple contingencia â”€â”€</span></div><div class="callout"><em>ğŸ’¡ Clave:</em> El Ed NO causa la respuesta (como el EI causa la RI). El Ed <b>seÃ±ala</b> que, si se emite la conducta, habrÃ¡ consecuencias. Es como un semÃ¡foro: no te obliga a cruzar, pero te indica que <b>ahora puedes</b>.</div>'},
{icon:'ğŸ­',title:'Operante vs Respondiente: dos mundos',color:'green',body:'<div class="movie"><div class="movie-h h2">ğŸ·ï¸ La distinciÃ³n clave</div><table><tr><td><b>Respondiente (CC)</b></td><td><b>Operante (CO)</b></td></tr><tr><td>Elicitada por EC</td><td>Emitida por el organismo</td></tr><tr><td>Controlada por antecedentes</td><td>Controlada por consecuencias</td></tr><tr><td>Involuntaria, automÃ¡tica</td><td>Voluntaria, seleccionada</td></tr><tr><td>Fibra lisa, vÃ­sceras, glÃ¡ndulas</td><td>Musculatura estriada</td></tr><tr><td>Ej: salivar, taquicardia, sudor</td><td>Ej: hablar, caminar, escribir</td></tr></table></div><div class="callout callout-g"><em>âš ï¸ Importante:</em> En la vida real, casi siempre ocurren <b>juntas</b>. Recuerda a Carlos del M4: la taquicardia (respondiente) funciona como Ed para subir escaleras (operante). El anÃ¡lisis funcional separa ambas para entenderlas mejor, pero en la persona siempre estÃ¡n integradas.</div>'},
{icon:'ğŸ“',title:'La respuesta operante: clase, no instancia',color:'purple',body:'<p>Cuando decimos "respuesta operante" no nos referimos a un movimiento exacto, sino a una <b>clase de respuestas</b> que comparten el mismo efecto.</p><div class="movie"><div class="movie-h h1">ğŸ¬ Ejemplo</div><p>Un niÃ±o puede abrir la puerta empujando con la mano, con el codo, con el pie, o pidiendo a alguien que la abra. TopogrÃ¡ficamente (forma fÃ­sica) son conductas distintas. Pero funcionalmente (efecto sobre el ambiente) son la misma operante: <b>la puerta se abre</b>.</p></div><div class="callout"><em>ğŸ’¡ Regla:</em> Una operante se define por su <b>funciÃ³n</b> (el efecto que produce), no por su <b>topografÃ­a</b> (cÃ³mo se ve). Esto es crucial en clÃ­nica: lo que importa es quÃ© consigue la conducta del paciente, no cÃ³mo la ejecuta.</div>'}
],
exercises:[
{type:'tf',skill:'triple_c',s:'La conducta operante es aquella que estÃ¡ controlada fundamentalmente por sus consecuencias.',c:true,ok:'La operante se define precisamente por esto: su probabilidad depende de las consecuencias que la siguen.',fail:'ğŸ”‘ "Operante" viene de "operar" sobre el ambiente. Sus consecuencias controlan su probabilidad futura.'},
{type:'tf',skill:'triple_c',s:'El estÃ­mulo discriminativo (Ed) provoca o causa la respuesta operante, igual que el EI causa la RI.',c:false,ok:'Â¡No! El Ed NO causa la R â€” la seÃ±ala, la evoca, indica que el reforzador estÃ¡ disponible. Es como un semÃ¡foro, no como un empujÃ³n.',fail:'ğŸ”‘ El Ed seÃ±ala la disponibilidad de la consecuencia, pero no causa la R. Evocar â‰  elicitar.'},
{type:'tf',skill:'triple_c',s:'Un reforzador se define a priori por ser algo agradable para el sujeto.',c:false,ok:'Â¡Exacto, es falso! Un reforzador se define por su EFECTO: si aumenta la probabilidad de la conducta, es reforzador. No importa si "parece" agradable â€” solo importa el efecto observable.',fail:'ğŸ”‘ El reforzador NO se define por ser agradable, sino por su efecto de aumentar la conducta. Es una definiciÃ³n funcional, no subjetiva.'},
{type:'single',skill:'triple_c',text:'ğŸ± Thorndike encerrÃ³ gatos en cajas-problema. Los gatos aprendÃ­an a escapar cada vez mÃ¡s rÃ¡pido. Â¿QuÃ© principio formulÃ³ a partir de esta observaciÃ³n?',opts:['La Ley de la ContigÃ¼idad','La Ley del Efecto ğŸ“‹','La Ley de la Frecuencia','La Ley de la AsociaciÃ³n'],c:1,ok:'La Ley del Efecto: las respuestas seguidas de consecuencias satisfactorias se fortalecen.',fail:'ğŸ”‘ Thorndike propuso la Ley del Efecto: la consecuencia satisfactoria fortalece la conexiÃ³n E-R.',bonus:'Skinner refinÃ³ esto: no importa si es "satisfactorio" subjetivamente, solo si la conducta aumenta o disminuye.'},
{type:'single',skill:'triple_c',text:'âœ‹ Marcos levanta la mano en clase cuando la profesora hace una pregunta que sabe responder. La profesora le felicita. Â¿CuÃ¡l es el Ed (estÃ­mulo discriminativo)?',opts:['Levantar la mano','La felicitaciÃ³n de la profesora','Que la profesora haga una pregunta que sabe ğŸ“‹','Marcos sentado en su silla'],c:2,ok:'Â¡Correcto! La pregunta que sabe = Ed. SeÃ±ala que levantar la mano (R) probablemente irÃ¡ seguido de felicitaciÃ³n (C+).',fail:'ğŸ”‘ El Ed es lo que PRECEDE a la conducta y seÃ±ala la disponibilidad de la consecuencia.'},
{type:'single',skill:'triple_c',text:'ğŸ¶ Cada vez que el perro se sienta cuando su dueÃ±o dice "Â¡sienta!", recibe una galleta. Â¿CuÃ¡l es la respuesta operante?',opts:['Decir "Â¡sienta!"','La galleta ğŸ¦´','Sentarse ğŸ•','El dueÃ±o'],c:2,ok:'Sentarse es la R â€” la conducta que opera sobre el ambiente y produce la consecuencia (galleta).',fail:'ğŸ”‘ La R es la conducta del organismo que produce un efecto en el ambiente.'},
{type:'order',skill:'triple_c',text:'Ordena los elementos de la triple contingencia en su secuencia correcta:',items:['Ed: La profesora pregunta','R: Marcos levanta la mano','C: La profesora le felicita'],ok:'Â¡Perfecto! Ed â†’ R â†’ C. El antecedente seÃ±ala, la conducta se emite, la consecuencia la modifica.',fail:'ğŸ”‘ La secuencia siempre es: primero el contexto (Ed), luego la conducta (R), luego la consecuencia (C).'},
{type:'fill',skill:'triple_c',diagram:'En el CO, el {0} seÃ±ala la disponibilidad de la consecuencia. El organismo emite la {1}. La {2} modifica la probabilidad futura de esa conducta.',blanks:['Ed','R','C'],opts:['Ed','R','C','EI','EC','RI'],ok:'Ed â†’ R â†’ C: los tres pilares del CO.',fail:'ğŸ”‘ Ed (discriminativo) â†’ R (operante) â†’ C (consecuencia). Tres elementos, un proceso.'},
{type:'classify',skill:'triple_c',text:'Clasifica cada ejemplo como conducta RESPONDIENTE o conducta OPERANTE:',cats:['Respondiente','Operante'],items:[{t:'Salivar al oler comida ğŸ¤¤',c:0},{t:'Pedir el postre al camarero ğŸ°',c:1},{t:'Taquicardia al ver una araÃ±a ğŸ•·ï¸',c:0},{t:'Coger el paraguas al ver nubes â˜‚ï¸',c:1},{t:'SudoraciÃ³n antes de un examen ğŸ˜°',c:0},{t:'Estudiar la noche antes del examen ğŸ“š',c:1}],ok:'Las respondientes son automÃ¡ticas (CC); las operantes son emitidas y controladas por consecuencias (CO).',fail:'ğŸ”‘ Respondiente = involuntaria, automÃ¡tica (CC). Operante = voluntaria, controlada por consecuencias (CO).'},
{type:'seq',skill:'triple_c',patient:{name:'LucÃ­a',age:'6 aÃ±os',gender:'f',initial:'L',badge:'Rabietas ğŸ˜¤'},quote:'"Cuando estamos en el supermercado y LucÃ­a quiere chuches, se tira al suelo y grita. Al final siempre acabo dÃ¡ndoselas para que pare."',questions:[
{text:'Â¿CuÃ¡l es la respuesta operante (R) de LucÃ­a?',opts:['Querer chuches','Tirarse al suelo y gritar ğŸ˜¤','Las chuches','El supermercado'],c:1,fb:'Tirarse al suelo y gritar es la R â€” la conducta que LucÃ­a emite y que produce un efecto (obtener chuches).'},
{text:'Â¿CuÃ¡l es la consecuencia (C) que mantiene la rabieta?',opts:['El supermercado','El suelo duro','Que la madre le dÃ© las chuches ğŸ¬','Que otros miren'],c:2,fb:'La madre le da las chuches tras la rabieta â†’ eso refuerza la conducta. Sin esa consecuencia, la rabieta se extinguirÃ­a.'},
{text:'Â¿CuÃ¡l serÃ­a el Ed que seÃ±ala que la rabieta "funcionarÃ¡"?',opts:['Estar en el supermercado con mamÃ¡ ğŸ›’','Tener hambre','Las chuches en sÃ­','Otros niÃ±os con chuches'],c:0,fb:'El supermercado + mamÃ¡ = Ed. LucÃ­a ha aprendido que EN ESE CONTEXTO, gritar â†’ chuches. En otros contextos (ej: con papÃ¡ que no cede) quizÃ¡ no lo haga.'}]}
]},
// ===== LEVEL 2: LOS 4 PROCEDIMIENTOS =====
{title:'Reforzamiento y castigo: la tabla 2Ã—2',description:'R+, R-, C+, C-: los cuatro procedimientos bÃ¡sicos y sus confusiones tÃ­picas.',showCount:12,
cheat:['R+: contingencia positiva + estÃ­mulo apetitivo â†’ conducta AUMENTA','R-: contingencia negativa + estÃ­mulo aversivo â†’ conducta AUMENTA (escape/evitaciÃ³n)','C+: contingencia positiva + estÃ­mulo aversivo â†’ conducta DISMINUYE','C-: contingencia negativa + estÃ­mulo apetitivo â†’ conducta DISMINUYE','Positivo/Negativo = se AÃ‘ADE o se RETIRA algo (no bueno/malo)','Un reforzador se define por su EFECTO sobre la conducta, no por su morfologÃ­a','Escape: la R elimina un aversivo ya presente','EvitaciÃ³n: la R previene la apariciÃ³n del aversivo'],
theory:[
{icon:'ğŸ“Š',title:'La tabla 2Ã—2: cuatro procedimientos, dos preguntas',color:'accent',body:'<p>Para saber ante quÃ© procedimiento estamos, solo necesitas responder <b>dos preguntas</b>:</p><div class="movie"><div class="movie-h h1">ğŸ¬ Las dos preguntas mÃ¡gicas</div><p><b>Pregunta 1:</b> Â¿La conducta AUMENTA o DISMINUYE?<br>â†’ Si aumenta = <b>Reforzamiento</b><br>â†’ Si disminuye = <b>Castigo</b></p><p><b>Pregunta 2:</b> Â¿Se AÃ‘ADE algo o se RETIRA algo?<br>â†’ Si se aÃ±ade = <b>Positivo</b> (+)<br>â†’ Si se retira = <b>Negativo</b> (-)</p></div><div class="diag"><span class="label">â”€â”€ LA TABLA 2Ã—2 â”€â”€</span><br><br><span class="phase ph-before">Se AÃ‘ADE (+)</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="phase ph-after">Se RETIRA (-)</span><br><br>Conducta â†‘ â†’ &nbsp;<b>R+</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>R-</b><br>Conducta â†“ â†’ &nbsp;<b>C+</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>C-</b></div><div class="callout-r callout"><em>âš ï¸ Error tÃ­pico:</em> "Positivo" y "negativo" NO significan bueno/malo ni agradable/desagradable. Significan que se <b>aÃ±ade</b> (+) o se <b>retira</b> (-) un estÃ­mulo. El R- no es un "refuerzo malo" â€” es un refuerzo donde se retira algo aversivo.</div>'},
{icon:'âœ…',title:'Reforzamiento positivo (R+): se aÃ±ade algo, la conducta sube',color:'green',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ Ejemplo cotidiano</div><p><b>Sara</b> ordena su habitaciÃ³n. Su madre le dice "Â¡QuÃ© bien lo has hecho!" y le da 5â‚¬. La semana siguiente, Sara vuelve a ordenar sin que nadie se lo pida. ğŸ“ˆ</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Ordenar la habitaciÃ³n</td><td>R (operante)</td></tr><tr><td>Elogio + 5â‚¬</td><td>EstÃ­mulo apetitivo AÃ‘ADIDO</td></tr><tr><td>Sara ordena mÃ¡s</td><td>Conducta AUMENTA</td></tr><tr><td>Contingencia positiva</td><td>R â†’ apariciÃ³n del reforzador</td></tr></table></div>'},
{icon:'ğŸ”“',title:'Reforzamiento negativo (R-): se retira algo aversivo, la conducta sube',color:'accent',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ Ejemplo cotidiano</div><p><b>Jorge</b> tiene dolor de cabeza. Toma un ibuprofeno. El dolor desaparece. La prÃ³xima vez que le duela la cabeza, Jorge tomarÃ¡ ibuprofeno mÃ¡s rÃ¡pidamente. ğŸ“ˆ</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Tomar ibuprofeno</td><td>R (operante)</td></tr><tr><td>El dolor desaparece</td><td>EstÃ­mulo aversivo RETIRADO</td></tr><tr><td>Jorge toma pastillas mÃ¡s rÃ¡pido</td><td>Conducta AUMENTA</td></tr><tr><td>Contingencia negativa</td><td>R â†’ desapariciÃ³n del aversivo</td></tr></table></div><div class="ex-box"><div class="ex-box-l">Dos modalidades de R-</div><p><b>Escape:</b> el aversivo YA estÃ¡ presente y la R lo elimina. (Jorge ya tiene dolor â†’ toma pastilla â†’ dolor se va)<br><b>EvitaciÃ³n:</b> el aversivo AÃšN NO estÃ¡ y la R previene que aparezca. (Jorge siente que le va a doler â†’ toma pastilla preventiva â†’ el dolor no llega)</p></div>'},
{icon:'â›”',title:'Castigo positivo (C+): se aÃ±ade algo aversivo, la conducta baja',color:'red',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ Ejemplo cotidiano</div><p><b>Pablo</b> mete los dedos en el enchufe. Recibe una descarga elÃ©ctrica ğŸ’¥. Pablo no vuelve a meter los dedos en el enchufe. ğŸ“‰</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Meter dedos en enchufe</td><td>R (operante)</td></tr><tr><td>Descarga elÃ©ctrica</td><td>EstÃ­mulo aversivo AÃ‘ADIDO</td></tr><tr><td>Pablo deja de hacerlo</td><td>Conducta DISMINUYE</td></tr><tr><td>Contingencia positiva</td><td>R â†’ apariciÃ³n del aversivo</td></tr></table></div><div class="callout-r callout"><em>âš ï¸ Problema del C+:</em> El castigo positivo tiene muchos efectos colaterales: genera respuestas emocionales (miedo, rabia), supresiÃ³n temporal (no permanente), conductas de escape/evitaciÃ³n del castigador, y no enseÃ±a quÃ© hacer EN SU LUGAR.</div>'},
{icon:'ğŸš«',title:'Castigo negativo (C-): se retira algo apetitivo, la conducta baja',color:'purple',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ Ejemplo cotidiano</div><p><b>Elena</b> pega a su hermano mientras ven la tele. Su madre la manda a su habitaciÃ³n (sin tele). Elena deja de pegar. ğŸ“‰</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Pegar al hermano</td><td>R (operante)</td></tr><tr><td>Se retira la tele (reforzador)</td><td>EstÃ­mulo apetitivo RETIRADO</td></tr><tr><td>Elena pega menos</td><td>Conducta DISMINUYE</td></tr><tr><td>Contingencia negativa</td><td>R â†’ retirada del reforzador</td></tr></table></div><div class="callout"><em>ğŸ’¡ En clÃ­nica:</em> El C- (tiempo fuera, retirada de privilegios) suele preferirse al C+ porque reduce conducta <b>sin usar estimulaciÃ³n aversiva directa</b>.</div>'},
{icon:'ğŸ”€',title:'La gran confusiÃ³n: R- vs C+',color:'red',body:'<p>Esta es la confusiÃ³n mÃ¡s frecuente en estudiantes de psicologÃ­a. Ambos usan estimulaciÃ³n aversiva, pero son opuestos:</p><div class="movie"><div class="movie-h h2">ğŸ·ï¸ ComparaciÃ³n directa</div><table><tr><td></td><td><b>R- (Reforzamiento negativo)</b></td><td><b>C+ (Castigo positivo)</b></td></tr><tr><td>Â¿QuÃ© pasa con el aversivo?</td><td>DESAPARECE tras la R</td><td>APARECE tras la R</td></tr><tr><td>Â¿QuÃ© pasa con la conducta?</td><td>AUMENTA â†‘</td><td>DISMINUYE â†“</td></tr><tr><td>Contingencia</td><td>Negativa (R â†’ retira aversivo)</td><td>Positiva (R â†’ presenta aversivo)</td></tr></table></div><div class="callout callout-g"><em>ğŸ’¡ Truco:</em> PregÃºntate: "Â¿La conducta sube o baja?" Si SUBE â†’ es reforzamiento (aunque haya un aversivo de por medio). Si BAJA â†’ es castigo.</div>'}
],
exercises:[
{type:'tf',skill:'4_proc',s:'"Reforzamiento negativo" significa castigar al sujeto o darle algo desagradable.',c:false,ok:'Â¡Falso! R- significa RETIRAR algo aversivo â†’ la conducta AUMENTA. "Negativo" = se retira algo, no "malo".',fail:'ğŸ”‘ R- = se retira un aversivo â†’ la conducta aumenta. No es castigo.'},
{type:'tf',skill:'4_proc',s:'Los tÃ©rminos "positivo" y "negativo" en CO se refieren a contingencia (aÃ±adir/retirar), no a agradable/desagradable.',c:true,ok:'Positivo = se AÃ‘ADE algo. Negativo = se RETIRA algo. Nada que ver con bueno/malo.',fail:'ğŸ”‘ Positivo (+) = aÃ±adir. Negativo (-) = retirar. Son operaciones, no juicios de valor.'},
{type:'tf',skill:'4_proc',s:'Un reforzador se identifica a priori por ser algo que al sujeto le gusta o le resulta agradable.',c:false,ok:'Un reforzador se define por su EFECTO observable: si la conducta aumenta â†’ es reforzador. Para ESE sujeto en ESA situaciÃ³n.',fail:'ğŸ”‘ DefiniciÃ³n funcional: reforzador = evento que, al ser contingente con R, aumenta su probabilidad. No se define a priori.'},
{type:'single',skill:'4_proc',text:'ğŸ‘§ Sara ordena su cuarto y su madre le da 5â‚¬. Sara ordena mÃ¡s a menudo. Â¿QuÃ© procedimiento es?',opts:['Castigo negativo','Reforzamiento negativo','Reforzamiento positivo âœ…','Castigo positivo'],c:2,ok:'R+: se AÃ‘ADE un estÃ­mulo apetitivo (5â‚¬) â†’ la conducta AUMENTA.',fail:'ğŸ”‘ Conducta aumenta + se aÃ±ade algo â†’ R+.'},
{type:'single',skill:'4_proc',text:'ğŸ’Š Jorge tiene dolor de cabeza, toma ibuprofeno y el dolor desaparece. Ahora toma ibuprofeno mÃ¡s rÃ¡pido ante el dolor. Â¿QuÃ© procedimiento?',opts:['Reforzamiento positivo','Castigo positivo','Castigo negativo','Reforzamiento negativo ğŸ”“'],c:3,ok:'R-: se RETIRA un estÃ­mulo aversivo (dolor) â†’ la conducta AUMENTA (tomar pastilla).',fail:'ğŸ”‘ Conducta aumenta + se retira algo aversivo â†’ R-.'},
{type:'single',skill:'4_proc',text:'âš¡ Pablo mete los dedos en el enchufe y recibe una descarga. Deja de hacerlo. Â¿QuÃ© procedimiento?',opts:['Reforzamiento negativo','Castigo positivo â›”','Castigo negativo','ExtinciÃ³n'],c:1,ok:'C+: se AÃ‘ADE un estÃ­mulo aversivo (descarga) â†’ la conducta DISMINUYE.',fail:'ğŸ”‘ Conducta disminuye + se aÃ±ade algo aversivo â†’ C+.'},
{type:'single',skill:'4_proc',text:'ğŸ“º Elena pega a su hermano y la mandan a su cuarto (sin tele). Pega menos. Â¿QuÃ© procedimiento?',opts:['Castigo positivo','Reforzamiento negativo','Reforzamiento positivo','Castigo negativo ğŸš«'],c:3,ok:'C-: se RETIRA un estÃ­mulo apetitivo (tele) â†’ la conducta DISMINUYE.',fail:'ğŸ”‘ Conducta disminuye + se retira algo apetitivo â†’ C-.'},
{type:'classify',skill:'4_proc',text:'Clasifica cada situaciÃ³n en su procedimiento de CO correspondiente:',cats:['R+','R-','C+','C-'],items:[{t:'Un niÃ±o recibe un caramelo por portarse bien â†’ se porta bien mÃ¡s ğŸ¬',c:0},{t:'Un adolescente pierde el mÃ³vil por llegar tarde â†’ llega tarde menos ğŸ“±',c:3},{t:'Una rata recibe descarga al tocar una palanca â†’ deja de tocarla âš¡',c:2},{t:'Tomarse un ansiolÃ­tico reduce la ansiedad â†’ toma mÃ¡s ansiolÃ­ticos ğŸ’Š',c:1}],ok:'R+: aÃ±ade apetitivo, sube. R-: retira aversivo, sube. C+: aÃ±ade aversivo, baja. C-: retira apetitivo, baja.',fail:'ğŸ”‘ Dos preguntas: Â¿sube o baja? Â¿se aÃ±ade o se retira?'},
{type:'fill',skill:'4_proc',diagram:'Cuando la conducta {0} y se {1} un estÃ­mulo, estamos ante un reforzamiento positivo (R+).',blanks:['AUMENTA','AÃ‘ADE'],opts:['AUMENTA','DISMINUYE','AÃ‘ADE','RETIRA'],ok:'R+ = conducta AUMENTA + se AÃ‘ADE estÃ­mulo apetitivo.',fail:'ğŸ”‘ R+ = Reforzamiento (aumenta) + Positivo (se aÃ±ade).'},
{type:'order',skill:'4_proc',text:'Ordena los pasos del reforzamiento negativo por ESCAPE:',items:['El estÃ­mulo aversivo ya estÃ¡ presente (ej: dolor)','El sujeto emite una respuesta operante (ej: tomar pastilla)','El estÃ­mulo aversivo desaparece (ej: el dolor se va)','La conducta aumenta en probabilidad futura'],ok:'Escape: aversivo presente â†’ R â†’ aversivo desaparece â†’ R aumenta.',fail:'ğŸ”‘ En escape, el aversivo YA estÃ¡ ahÃ­ y la R lo elimina.'},
{type:'single',skill:'4_proc',text:'ğŸ”€ Un paciente evita salir a la calle porque siente ansiedad. Al quedarse en casa, la ansiedad baja. Cada vez sale menos. Â¿R- o C+?',opts:['C+ (porque la ansiedad es aversiva)','R- (porque al evitar, se retira la ansiedad y la evitaciÃ³n aumenta) ğŸ”“','C- (porque se retira la calle)','R+ (porque se siente aliviado)'],c:1,ok:'R-: la conducta de evitar AUMENTA porque RETIRA un aversivo (ansiedad). Es R- por evitaciÃ³n.',fail:'ğŸ”‘ Â¿La conducta sube o baja? SUBE (evita mÃ¡s) â†’ Es reforzamiento. Â¿Se retira algo? SÃ­ (ansiedad) â†’ Negativo. = R-.'},
{type:'seq',skill:'4_proc',patient:{name:'Diego',age:'14 aÃ±os',gender:'m',initial:'D',badge:'Conducta disruptiva ğŸ˜¤'},quote:'"Diego interrumpe constantemente en clase haciendo bromas. Los compaÃ±eros se rÃ­en. El profesor le grita y le pone un parte."',questions:[
{text:'Las risas de los compaÃ±eros funcionan como... Â¿quÃ© procedimiento para las bromas de Diego?',opts:['Castigo positivo','Reforzamiento positivo (las risas se aÃ±aden y la conducta sube) âœ…','Reforzamiento negativo','Castigo negativo'],c:1,fb:'R+: se AÃ‘ADE un estÃ­mulo apetitivo (risas/atenciÃ³n social) â†’ la conducta de bromear AUMENTA.'},
{text:'El grito del profesor y el parte, Â¿quÃ© procedimiento pretende ser?',opts:['Reforzamiento positivo','Castigo negativo','Castigo positivo (se aÃ±ade un aversivo para que la conducta baje) â›”','Reforzamiento negativo'],c:2,fb:'C+ intencional: se AÃ‘ADE estimulaciÃ³n aversiva (grito + parte) con la intenciÃ³n de que la conducta baje.'},
{text:'Si las bromas de Diego NO disminuyen a pesar del grito y el parte, Â¿podemos decir que el grito es un castigo efectivo?',opts:['SÃ­, porque el grito es aversivo','No, porque un castigo se define por su efecto: si la conducta no baja, no es castigo funcional âŒ','SÃ­, porque el profesor tiene autoridad','Depende de la intenciÃ³n del profesor'],c:1,fb:'ğŸ¯ Clave del anÃ¡lisis funcional: un reforzador o castigo se define por su EFECTO, no por su intenciÃ³n ni su apariencia. Si la conducta no baja, el grito no estÃ¡ funcionando como castigo â€” puede incluso estar siendo atenciÃ³n (R+).'}]}
]},
// ===== LEVEL 3: EXTINCIÃ“N Y PROGRAMAS =====
{title:'ExtinciÃ³n operante y programas de reforzamiento',description:'QuÃ© pasa cuando la consecuencia desaparece. CÃ³mo la distribuciÃ³n del reforzador determina el patrÃ³n de conducta.',showCount:10,
cheat:['ExtinciÃ³n operante: la R ya no produce la C que antes la mantenÃ­a (acontingencia)','Estallido de extinciÃ³n: aumento temporal de frecuencia/intensidad antes de descender','Variabilidad: durante extinciÃ³n surgen nuevas formas de R','RecuperaciÃ³n espontÃ¡nea: reapariciÃ³n parcial de R tras descanso','Programa continuo: cada R â†’ C (adquisiciÃ³n rÃ¡pida, extinciÃ³n rÃ¡pida)','Programa intermitente: no toda R â†’ C (adquisiciÃ³n lenta, extinciÃ³n MÃS resistente)','RazÃ³n: depende del nÂº de respuestas (RF = pausa-carrera; RV = tasa alta estable)','Intervalo: depende del tiempo (IF = festÃ³n; IV = tasa moderada estable)','IndefensiÃ³n aprendida: acontingencia entre conducta y ambiente â†’ dejar de responder'],
theory:[
{icon:'ğŸ“‰',title:'ExtinciÃ³n operante: cuando la consecuencia desaparece',color:'accent',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ La pelÃ­cula</div><p>Imagina que llevas semanas llamando a tu amigo Pablo. Cada vez que llamas, contesta y charlÃ¡is. Pero un dÃ­a, llamas y no contesta. Llamas al dÃ­a siguiente... tampoco. Una semana despuÃ©s, sigues probando con mÃ¡s insistencia â€” incluso llamas dos veces seguidas. Pero Pablo nunca contesta.</p><p>Â¿QuÃ© haces? Al principio llamas MÃS (Â¡quizÃ¡ estÃ© ocupado!). Luego empiezas a llamar con menos frecuencia. Al final, dejas de llamar por completo. ğŸ“‰</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Llamar a Pablo</td><td>R (operante)</td></tr><tr><td>Pablo contestaba (antes)</td><td>C (reforzador)</td></tr><tr><td>Pablo ya no contesta</td><td>Acontingencia R-C</td></tr><tr><td>Al principio llamas MÃS</td><td>Estallido de extinciÃ³n</td></tr><tr><td>Llamas de formas distintas (WhatsApp, email...)</td><td>Variabilidad</td></tr><tr><td>Finalmente dejas de llamar</td><td>ExtinciÃ³n</td></tr></table></div><div class="callout callout-g"><em>ğŸ’¡ ClÃ­nica:</em> El estallido de extinciÃ³n es crucial en terapia. Si dejas de reforzar rabietas, al principio <b>empeorarÃ¡n</b>. Hay que advertir a los padres: "La primera semana serÃ¡ peor. No cedÃ¡is o estarÃ©is reforzando intermitentemente."</div>'},
{icon:'â±ï¸',title:'Programas de reforzamiento: Â¿cada cuÃ¡nto se refuerza?',color:'gold',body:'<p>No siempre que emitimos una conducta nos refuerzan. La forma en que se distribuye el reforzador afecta enormemente al patrÃ³n de conducta.</p><div class="movie"><div class="movie-h h1">ğŸ¬ Continuo vs Intermitente</div><p><b>Continuo:</b> CADA vez que el niÃ±o ordena â†’ le felicitan. Aprende rÃ¡pido, PERO si un dÃ­a dejan de felicitarle, deja de ordenar rÃ¡pido tambiÃ©n (extinciÃ³n rÃ¡pida).</p><p><b>Intermitente:</b> ALGUNAS veces que ordena â†’ le felicitan. Tarda mÃ¡s en aprender, PERO si dejan de felicitarle, sigue ordenando mucho mÃ¡s tiempo (extinciÃ³n resistente).</p></div><div class="callout"><em>ğŸ’¡ Regla de oro:</em> Para INSTAURAR una conducta nueva â†’ reforzamiento continuo. Para MANTENERLA a largo plazo â†’ pasar a reforzamiento intermitente.</div>'},
{icon:'ğŸ“Š',title:'Los 4 programas simples',color:'green',body:'<div class="movie"><div class="movie-h h2">ğŸ·ï¸ La tabla completa</div><table><tr><td><b>Programa</b></td><td><b>Depende de...</b></td><td><b>PatrÃ³n</b></td><td><b>Ejemplo</b></td></tr><tr><td>RazÃ³n Fija (RF)</td><td>NÂº respuestas (siempre igual)</td><td>Pausa-carrera: pausa tras refuerzo, luego tasa alta</td><td>Pagar por 5 piezas producidas</td></tr><tr><td>RazÃ³n Variable (RV)</td><td>NÂº respuestas (variable)</td><td>Tasa alta y estable, sin pausas</td><td>MÃ¡quinas tragamonedas ğŸ°</td></tr><tr><td>Intervalo Fijo (IF)</td><td>Tiempo (siempre igual)</td><td>FestÃ³n: pausa, luego aceleraciÃ³n al acercarse el refuerzo</td><td>Estudiar antes de exÃ¡menes trimestrales</td></tr><tr><td>Intervalo Variable (IV)</td><td>Tiempo (variable)</td><td>Tasa moderada, constante, estable</td><td>Revisar email, exÃ¡menes sorpresa</td></tr></table></div><div class="callout callout-g"><em>ğŸ’¡ Regla:</em> Los programas <b>variables</b> producen mÃ¡s resistencia a extinciÃ³n que los fijos. Los de <b>razÃ³n</b> producen tasas mÃ¡s altas que los de intervalo. La combinaciÃ³n mÃ¡s resistente: RV (razÃ³n variable).</div>'},
{icon:'ğŸ˜”',title:'IndefensiÃ³n aprendida: cuando nada funciona',color:'red',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ La pelÃ­cula</div><p><b>Seligman</b> (aÃ±os 70) descubriÃ³ algo perturbador: cuando un animal recibe descargas <b>sin posibilidad de escape</b>, al cabo de un tiempo deja de intentar escapar â€” incluso cuando <b>ya le dejan salir</b>. Se queda inmÃ³vil recibiendo las descargas. Ha aprendido que su conducta no sirve para nada. ğŸ˜”</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Descargas sin posibilidad de escape</td><td>Acontingencia R-C total</td></tr><tr><td>El animal deja de intentar</td><td>IndefensiÃ³n aprendida</td></tr><tr><td>"Mi conducta no cambia nada"</td><td>Falta de contingencia percibida</td></tr></table></div><div class="callout-r callout"><em>âš ï¸ En clÃ­nica:</em> Se ha propuesto como modelo explicativo de la depresiÃ³n: la persona ha aprendido en su historia que su conducta no produce cambios en el entorno. La intervenciÃ³n pasa por restablecer contingencias claras entre lo que hace y lo que obtiene.</div>'}
],
exercises:[
{type:'tf',skill:'ext_prog',s:'La extinciÃ³n operante consiste en eliminar o borrar el aprendizaje previo.',c:false,ok:'La extinciÃ³n NO borra el aprendizaje â€” es un nuevo aprendizaje: "ahora la R ya no produce C". Prueba: la recuperaciÃ³n espontÃ¡nea.',fail:'ğŸ”‘ ExtinciÃ³n = nuevo aprendizaje, no borrado. Por eso existe la recuperaciÃ³n espontÃ¡nea.'},
{type:'tf',skill:'ext_prog',s:'Los programas de reforzamiento variable producen mayor resistencia a la extinciÃ³n que los fijos.',c:true,ok:'Correcto: en un programa variable el sujeto "nunca sabe" cuÃ¡ndo viene el reforzador, asÃ­ que tarda mÃ¡s en detectar que ya no viene (= mÃ¡s resistencia a extinciÃ³n).',fail:'ğŸ”‘ Variable = mÃ¡s difÃ­cil de distinguir de la extinciÃ³n â†’ mÃ¡s resistencia.'},
{type:'single',skill:'ext_prog',text:'ğŸ“ Llamas a tu amigo 10 veces y nunca contesta. Las primeras veces llamas CON MÃS insistencia. Este fenÃ³meno se llama...',opts:['RecuperaciÃ³n espontÃ¡nea','GeneralizaciÃ³n','Estallido de extinciÃ³n ğŸ’¥','DiscriminaciÃ³n'],c:2,ok:'Estallido de extinciÃ³n: al inicio de la extinciÃ³n, la R aumenta en frecuencia/intensidad antes de empezar a descender.',fail:'ğŸ”‘ Estallido = aumento inicial de R al comenzar la extinciÃ³n. Es esperable y temporal.'},
{type:'single',skill:'ext_prog',text:'ğŸ° Las mÃ¡quinas tragamonedas estÃ¡n diseÃ±adas con un programa de...',opts:['RazÃ³n fija','Intervalo fijo','Intervalo variable','RazÃ³n variable ğŸ²'],c:3,ok:'RV (razÃ³n variable): a veces ganas tras 5 monedas, a veces tras 50, a veces tras 200. Impredecible â†’ altÃ­sima tasa de respuesta y enorme resistencia a extinciÃ³n.',fail:'ğŸ”‘ Tragamonedas = RV. Nunca sabes cuÃ¡ntas monedas necesitas â†’ sigues jugando.',bonus:'Â¡Por eso el juego patolÃ³gico es tan difÃ­cil de extinguir! La persona piensa "la prÃ³xima vez toca".'},
{type:'single',skill:'ext_prog',text:'ğŸ“š Los estudiantes estudian poco durante el trimestre pero intensamente justo antes del examen. Este patrÃ³n (pausa â†’ aceleraciÃ³n) corresponde a un programa de...',opts:['RazÃ³n variable','Intervalo fijo (festÃ³n) ğŸ“…','RazÃ³n fija','Intervalo variable'],c:1,ok:'IF: el reforzador (aprobar) estÃ¡ disponible cada X tiempo (trimestre). PatrÃ³n festÃ³n = pausa post-reforzador + aceleraciÃ³n al acercarse la fecha.',fail:'ğŸ”‘ FestÃ³n del IF = la conducta se acelera conforme se acerca el momento del reforzador.'},
{type:'classify',skill:'ext_prog',text:'Clasifica cada ejemplo en su programa de reforzamiento:',cats:['RF','RV','IF','IV'],items:[{t:'Cobrar por cada 10 piezas fabricadas',c:0},{t:'Comprobar si hay peces en la caÃ±a de pescar ğŸ£',c:3},{t:'Comprar el periÃ³dico cada maÃ±ana (sale a diario)',c:2},{t:'Jugar a la loterÃ­a cada semana ğŸ°',c:1}],ok:'RF: nÂº fijo de R. RV: nÂº variable. IF: tiempo fijo. IV: tiempo variable.',fail:'ğŸ”‘ PregÃºntate: Â¿depende de cuÃ¡ntas R o de cuÃ¡nto tiempo? Â¿es fijo o variable?'},
{type:'order',skill:'ext_prog',text:'Ordena las fases de la extinciÃ³n operante como ocurren en el tiempo:',items:['La R deja de ir seguida de su C habitual','Estallido: la R aumenta en frecuencia e intensidad','Variabilidad: aparecen nuevas formas de R','La R disminuye gradualmente','Posible recuperaciÃ³n espontÃ¡nea tras descanso'],ok:'Acontingencia â†’ estallido â†’ variabilidad â†’ descenso â†’ posible recuperaciÃ³n.',fail:'ğŸ”‘ Secuencia: romper contingencia â†’ estallido â†’ variabilidad â†’ descenso â†’ posible reapariciÃ³n.'},
{type:'fill',skill:'ext_prog',diagram:'Para INSTAURAR una conducta nueva usamos reforzamiento {0}. Para MANTENERLA a largo plazo pasamos a reforzamiento {1}.',blanks:['CONTINUO','INTERMITENTE'],opts:['CONTINUO','INTERMITENTE','VARIABLE','FIJO'],ok:'Continuo para aprender, intermitente para mantener â€” la regla de oro.',fail:'ğŸ”‘ Continuo = adquisiciÃ³n rÃ¡pida. Intermitente = mantenimiento resistente.'},
{type:'single',skill:'ext_prog',text:'ğŸ˜” Seligman descubriÃ³ que animales expuestos a descargas inescapables dejaban de intentar escapar incluso cuando ya podÃ­an. Este fenÃ³meno se llama...',opts:['ExtinciÃ³n operante','Estallido de extinciÃ³n','IndefensiÃ³n aprendida ğŸ˜”','HabituaciÃ³n'],c:2,ok:'IndefensiÃ³n aprendida: la acontingencia total (R no produce ningÃºn cambio) lleva a dejar de responder.',fail:'ğŸ”‘ IndefensiÃ³n aprendida = la conducta no tiene efecto sobre el ambiente â†’ se deja de intentar.'},
{type:'seq',skill:'ext_prog',patient:{name:'MartÃ­n',age:'5 aÃ±os',gender:'m',initial:'M',badge:'Rabietas en extinciÃ³n ğŸ˜¤'},quote:'"Hemos dejado de dar chuches a MartÃ­n cuando hace rabietas. La primera semana fue HORRIBLE â€” gritaba mÃ¡s fuerte, se tiraba al suelo, pateaba. Pero aguantamos."',questions:[
{text:'El hecho de que MartÃ­n gritara MÃS al principio es un ejemplo de...',opts:['Fracaso de la extinciÃ³n','Reforzamiento negativo','Estallido de extinciÃ³n ğŸ’¥','IncubaciÃ³n'],c:2,fb:'Estallido de extinciÃ³n: al retirar el reforzador, la conducta empeora temporalmente antes de mejorar. Es ESPERABLE y seÃ±al de que la extinciÃ³n funciona.'},
{text:'Si los padres "aguantan" y NO dan chuches durante el estallido, Â¿quÃ© pasarÃ¡ a largo plazo?',opts:['Las rabietas empeorarÃ¡n para siempre','Las rabietas disminuirÃ¡n gradualmente hasta desaparecer ğŸ“‰','MartÃ­n cambiarÃ¡ a otra conducta problema','No pasarÃ¡ nada'],c:1,fb:'Si la acontingencia R-C se mantiene, la R disminuirÃ¡. Pero si ceden DURANTE el estallido, estarÃ¡n reforzando intermitentemente â€” haciÃ©ndola MÃS resistente.'}]}
]},
// ===== LEVEL 4: CONTROL DE ESTÃMULOS Y REGLAS =====
{title:'Ed, discriminaciÃ³n y conducta gobernada por reglas',description:'CÃ³mo el contexto controla la conducta operante. Reglas como la cuarta contingencia.',showCount:10,
cheat:['Ed+: seÃ±ala que R serÃ¡ reforzada â†’ aumenta probabilidad de R','Ed- (delta): seÃ±ala que R NO serÃ¡ reforzada â†’ disminuye probabilidad de R','DiscriminaciÃ³n operante: responder diferente segÃºn el Ed presente','GeneralizaciÃ³n operante: responder igual ante Ed similares','Conducta gobernada por reglas: controlada por especificaciones verbales de contingencias','Conducta gobernada por contingencias: controlada por consecuencias directas','Regla: estÃ­mulo verbal que especifica una contingencia (si haces X en situaciÃ³n Y, pasarÃ¡ Z)','Las reglas pueden mantener conducta sin consecuencias inmediatas'],
theory:[
{icon:'ğŸ”¦',title:'Ed+ y Ed-: los semÃ¡foros de la conducta',color:'accent',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ La pelÃ­cula</div><p>Imagina a <b>Clara</b>, una adolescente. Cuando su padre estÃ¡ de buen humor (sonriente, relajado), Clara pide permiso para salir con amigas y suele obtenerlo âœ…. Cuando su padre estÃ¡ de mal humor (ceÃ±o fruncido, tenso), Clara sabe que si pide permiso le dirÃ¡n que no y ademÃ¡s le echarÃ¡n la bronca âŒ.</p><p>Clara no siempre pide permiso â€” solo cuando su padre estÃ¡ de buen humor. Â¿QuiÃ©n controla cuÃ¡ndo Clara emite la conducta de pedir? El <b>estado de Ã¡nimo visible del padre</b>.</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ Las etiquetas</div><table><tr><td>Padre de buen humor</td><td><b>Ed+</b> (seÃ±ala que R â†’ C+)</td></tr><tr><td>Padre de mal humor</td><td><b>Ed-</b> o EÎ” (seÃ±ala que R â†’ nada o castigo)</td></tr><tr><td>Clara pide permiso</td><td>R (operante)</td></tr><tr><td>Le dan permiso / le dicen que no</td><td>C (consecuencia diferencial)</td></tr></table></div><div class="callout"><em>ğŸ’¡ Clave:</em> Clara ha aprendido a <b>discriminar</b>: emitir la R en presencia de Ed+ pero no de Ed-. Su conducta estÃ¡ bajo <b>control de estÃ­mulos</b>.</div>'},
{icon:'ğŸ“œ',title:'Conducta gobernada por reglas: la cuarta contingencia',color:'gold',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ La pelÃ­cula</div><p>Un padre le dice a su hijo: "No te vayas con extraÃ±os porque te pueden hacer daÃ±o." El niÃ±o nunca ha tenido una mala experiencia con extraÃ±os, pero <b>rechaza el caramelo</b> que le ofrece un desconocido en el parque. ğŸš«ğŸ¬</p><p>Â¿CÃ³mo aprendiÃ³ esta conducta sin experiencia directa? Por una <b>regla</b>: una especificaciÃ³n verbal de una contingencia que nunca ha experimentado directamente.</p></div><div class="movie"><div class="movie-h h2">ğŸ·ï¸ ComparaciÃ³n</div><table><tr><td><b>Por contingencias directas</b></td><td><b>Por reglas</b></td></tr><tr><td>Necesita experiencia directa</td><td>No necesita experiencia directa</td></tr><tr><td>MÃºltiples ensayos</td><td>Puede bastar un solo ensayo</td></tr><tr><td>Se extingue si cambian las C</td><td>Puede resistir cambios en las C</td></tr><tr><td>Ej: tocar fuego â†’ quemarse</td><td>Ej: "no toques el fuego que te quemas"</td></tr></table></div><div class="callout callout-g"><em>ğŸ’¡ En clÃ­nica:</em> Muchas conductas problemÃ¡ticas se mantienen por reglas, no por contingencias directas. "Si muestro debilidad, me harÃ¡n daÃ±o" puede mantener evitaciÃ³n emocional sin que nunca haya ocurrido. En terapia, a veces hay que trabajar con las reglas que la persona sigue, no solo con las contingencias.</div>'}
],
exercises:[
{type:'tf',skill:'ed_reglas',s:'El estÃ­mulo discriminativo (Ed) es el que CAUSA la respuesta operante de forma automÃ¡tica.',c:false,ok:'El Ed NO causa la R â€” la EVOCA o seÃ±ala la disponibilidad de la consecuencia. Evocar â‰  elicitar.',fail:'ğŸ”‘ El Ed seÃ±ala, no causa. Es como un semÃ¡foro que indica cuÃ¡ndo cruzar, no te empuja.'},
{type:'tf',skill:'ed_reglas',s:'Una conducta gobernada por reglas puede mantenerse incluso sin consecuencias directas inmediatas.',c:true,ok:'Las reglas pueden mantener conducta a largo plazo sin experiencia directa (ej: "esfuÃ©rzate y conseguirÃ¡s un buen trabajo").',fail:'ğŸ”‘ Las reglas especifican contingencias verbalmente y pueden sostener conducta sin consecuencias directas.'},
{type:'single',skill:'ed_reglas',text:'ğŸ‘¨ El padre de Clara estÃ¡ sonriente y relajado. Clara pide permiso para salir y se lo conceden. La cara sonriente del padre funciona como...',opts:['EstÃ­mulo condicionado (EC)','Reforzador positivo','EstÃ­mulo discriminativo positivo (Ed+) ğŸ”¦','OperaciÃ³n de establecimiento'],c:2,ok:'Ed+: seÃ±ala que la R (pedir permiso) probablemente serÃ¡ reforzada (le dejarÃ¡n salir).',fail:'ğŸ”‘ Ed+ = estÃ­mulo que seÃ±ala que si se emite la R, habrÃ¡ reforzamiento disponible.'},
{type:'single',skill:'ed_reglas',text:'ğŸš« Un niÃ±o rechaza un caramelo de un extraÃ±o porque su padre le dijo "nunca aceptes cosas de desconocidos". El niÃ±o nunca ha tenido una mala experiencia. Su conducta estÃ¡ gobernada por...',opts:['Contingencias directas','Reforzamiento negativo','Una regla ğŸ“œ','Condicionamiento clÃ¡sico'],c:2,ok:'Conducta gobernada por reglas: la regla verbal especifica una contingencia que el niÃ±o no ha experimentado directamente.',fail:'ğŸ”‘ Si la conducta se mantiene por una instrucciÃ³n verbal sin experiencia directa â†’ gobernada por reglas.'},
{type:'classify',skill:'ed_reglas',text:'Â¿La conducta estÃ¡ gobernada por CONTINGENCIAS directas o por REGLAS?',cats:['Contingencias','Reglas'],items:[{t:'Un niÃ±o deja de tocar la estufa despuÃ©s de quemarse ğŸ”¥',c:0},{t:'Un niÃ±o no toca la estufa porque le dijeron "quema" ğŸ—£ï¸',c:1},{t:'Hablar con un compaÃ±ero de un tema interesante en clase ğŸ’¬',c:0},{t:'"Si estudias, aprobarÃ¡s" â†’ el niÃ±o estudia aunque no haya examen pronto ğŸ“š',c:1}],ok:'Contingencias = experiencia directa. Reglas = instrucciÃ³n verbal que especifica la contingencia.',fail:'ğŸ”‘ Â¿Hubo experiencia directa? â†’ contingencias. Â¿Hubo instrucciÃ³n verbal? â†’ reglas.'},
{type:'fill',skill:'ed_reglas',diagram:'El {0} seÃ±ala la disponibilidad del reforzador. La {1} se emite en su presencia. La {2} modifica la probabilidad futura.',blanks:['Ed','R','C'],opts:['Ed','R','C','EC','EI','RC'],ok:'Ed â†’ R â†’ C: la triple contingencia del CO.',fail:'ğŸ”‘ Ed (discriminativo) â†’ R (operante) â†’ C (consecuencia).'},
{type:'single',skill:'ed_reglas',text:'ğŸŠ En una piscina, hay un cartel de "PROHIBIDO TIRARSE DE CABEZA". Los baÃ±istas no se tiran. Pero cuando no hay socorrista, algunos sÃ­ se tiran. El cartel funciona como... y el socorrista como...',opts:['EC y EI respectivamente','Ed+ y Ed- respectivamente','Ed- (cartel) pero el socorrista es el verdadero Ed- ğŸ”¦','Ambos son reforzadores'],c:2,ok:'El cartel es un Ed- formal, pero el verdadero control lo ejerce la presencia del socorrista (consecuencias reales). Sin socorrista, el cartel pierde funciÃ³n discriminativa.',fail:'ğŸ”‘ Un Ed funciona en la medida en que realmente seÃ±ale consecuencias. Sin consecuencias reales, pierde su funciÃ³n.'},
{type:'order',skill:'ed_reglas',text:'Ordena los pasos del entrenamiento de discriminaciÃ³n operante:',items:['En presencia de Ed+, la R es reforzada','En presencia de Ed- (delta), la R NO es reforzada','El organismo aprende a responder diferente segÃºn el Ed','La conducta queda bajo control de estÃ­mulos'],ok:'Reforzamiento diferencial segÃºn el Ed â†’ discriminaciÃ³n â†’ control de estÃ­mulos.',fail:'ğŸ”‘ La discriminaciÃ³n se aprende porque las consecuencias son DIFERENTES segÃºn el contexto.'},
{type:'seq',skill:'ed_reglas',patient:{name:'Carmen',age:'35 aÃ±os',gender:'f',initial:'C',badge:'EvitaciÃ³n social ğŸ˜°'},quote:'"Carmen nunca da su opiniÃ³n en reuniones de trabajo. Dice que aprendiÃ³ de pequeÃ±a que opinar en su casa provocaba discusiones y castigos. Sin embargo, con amigas de confianza sÃ­ opina."',questions:[
{text:'La regla que parece gobernar la conducta de Carmen en el trabajo es...',opts:['"Si opino, habrÃ¡ consecuencias negativas" ğŸ“œ','"Las reuniones son aburridas"','"No tengo nada interesante que decir"','"Los jefes siempre tienen razÃ³n"'],c:0,fb:'Carmen sigue la regla "opinar â†’ castigo", aprendida en su familia de origen. Esta regla controla su conducta en contextos laborales aunque las contingencias reales puedan ser diferentes.'},
{text:'Â¿Que Carmen sÃ­ opine con amigas demuestra que su conducta estÃ¡ bajo...',opts:['GeneralizaciÃ³n total','Control de estÃ­mulos: discrimina entre contextos ğŸ”¦','ExtinciÃ³n de la evitaciÃ³n','IndefensiÃ³n aprendida'],c:1,fb:'Carmen discrimina: con amigas (Ed+ â†’ opinar es reforzado) vs en trabajo (Ed- â†’ teme castigo). Su evitaciÃ³n no es "de personalidad" â€” es funcional y contextual.'}]}
]},
// ===== LEVEL 5: CASOS CLÃNICOS =====
{title:'Descifra la secuencia operante',description:'Analiza casos clÃ­nicos completos: identifica Ed, R, C, procedimiento y propuesta de intervenciÃ³n.',showCount:8,
cheat:['Siempre buscar la triple contingencia: Ed â†’ R â†’ C','La funciÃ³n de la conducta importa mÃ¡s que su forma','Preguntarse: Â¿quÃ© CONSIGUE esta conducta? (reforzamiento) Â¿quÃ© EVITA? (R-)','Un mismo comportamiento puede mantenerse por diferentes procedimientos','La intervenciÃ³n se diseÃ±a sobre la FUNCIÃ“N, no sobre la topografÃ­a'],
theory:[
{icon:'ğŸ¥',title:'El CO en clÃ­nica: la pregunta fundamental',color:'accent',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ La pregunta que siempre debes hacer</div><p>Cuando un paciente presenta una conducta problema, la pregunta NO es "Â¿quÃ© le pasa?" ni "Â¿por quÃ© es asÃ­?". La pregunta es:</p><p style="font-size:20px;text-align:center;font-weight:700;color:var(--accent);margin:16px 0">"Â¿QuÃ© consecuencias mantienen esta conducta?"</p><p>Y su complementaria:</p><p style="font-size:20px;text-align:center;font-weight:700;color:var(--gold);margin:16px 0">"Â¿En quÃ© contextos (Ed) aparece y en cuÃ¡les no?"</p></div><div class="callout"><em>ğŸ’¡ El anÃ¡lisis funcional:</em> No cambiamos personas, cambiamos <b>contingencias</b>. Si la conducta se mantiene por R+ (atenciÃ³n), retiramos la atenciÃ³n. Si por R- (evitaciÃ³n), exponemos. Si por reglas disfuncionales, trabajamos las reglas. La intervenciÃ³n siempre parte de la funciÃ³n.</div>'},
{icon:'ğŸ”',title:'La misma topografÃ­a, distintas funciones',color:'gold',body:'<div class="movie"><div class="movie-h h1">ğŸ¬ Ejemplo</div><p>Tres niÃ±os lloran en clase:</p><p>ğŸ§’ <b>NiÃ±o A:</b> Llora â†’ la profesora le presta atenciÃ³n â†’ llora mÃ¡s. (<b>R+</b>: atenciÃ³n social)</p><p>ğŸ‘§ <b>NiÃ±a B:</b> Llora â†’ la sacan de clase â†’ llora mÃ¡s. (<b>R-</b>: escapar de la situaciÃ³n aversiva)</p><p>ğŸ‘¦ <b>NiÃ±o C:</b> Llora â†’ su madre viene a recogerle â†’ llora mÃ¡s. (<b>R-</b>: evitar el resto de la jornada)</p><p>La <b>topografÃ­a</b> es idÃ©ntica (llorar). Pero la <b>funciÃ³n</b> es diferente en cada caso. Y por tanto, la intervenciÃ³n debe ser diferente.</p></div><div class="callout-r callout"><em>âš ï¸ Error clÃ­nico:</em> Tratar todas las conductas "iguales" de la misma manera (ej: ignorar siempre el llanto) solo funcionarÃ¡ si la funciÃ³n es R+ por atenciÃ³n. Si es R-, ignorar no resuelve nada â€” hay que abordar lo aversivo de la situaciÃ³n.</div>'}
],
exercises:[
{type:'seq',skill:'caso_co',patient:{name:'Alejandro',age:'42 aÃ±os',gender:'m',initial:'A',badge:'Alcoholismo funcional ğŸ·'},quote:'"Bebo todas las noches al llegar a casa. Es lo Ãºnico que me relaja despuÃ©s de un dÃ­a estresante. Mi mujer me riÃ±e, pero no puedo parar. Si no bebo, la ansiedad me come."',questions:[
{text:'La conducta de beber parece mantenerse por...',opts:['Reforzamiento positivo (placer de beber)','Reforzamiento negativo (beber retira la ansiedad) ğŸ”“','Castigo positivo (su mujer le riÃ±e)','HÃ¡bito sin funciÃ³n'],c:1,fb:'R-: beber RETIRA un estado aversivo (ansiedad/estrÃ©s) â†’ la conducta de beber AUMENTA. El alivio refuerza.'},
{text:'Las riÃ±as de su mujer, Â¿funcionan como castigo efectivo?',opts:['SÃ­, porque son aversivas','No, porque la conducta de beber NO disminuye âŒ','SÃ­, pero su efecto es temporal','No se puede saber'],c:1,fb:'Un castigo se define por su EFECTO. Si la conducta no baja, no es castigo funcional â€” por mÃ¡s que las riÃ±as sean "aversivas" en apariencia.'},
{text:'Â¿CuÃ¡l serÃ­a el Ed que seÃ±ala la disponibilidad del reforzamiento (alivio)?',opts:['La botella de vino','El reloj marcando las 20:00','Llegar a casa tras un dÃ­a estresante ğŸ ','Su mujer'],c:2,fb:'Llegar a casa despuÃ©s del estrÃ©s = Ed. SeÃ±ala que beber â†’ alivio disponible. En otros contextos (ej: maÃ±ana de domingo tranquila) quizÃ¡ no beba.'}]},
{type:'seq',skill:'caso_co',patient:{name:'Valeria',age:'28 aÃ±os',gender:'f',initial:'V',badge:'Autolesiones ğŸ©¹'},quote:'"Cuando siento ese vacÃ­o horrible por dentro, me hago cortes en el brazo. Es como si el dolor fÃ­sico sustituyera al dolor emocional. DespuÃ©s me siento aliviada, pero al rato me invade la culpa."',questions:[
{text:'La autolesiÃ³n parece mantenerse principalmente por...',opts:['Castigo positivo (dolor)','Reforzamiento negativo (retira el malestar emocional) ğŸ”“','Reforzamiento positivo (busca atenciÃ³n)','Conducta gobernada por reglas'],c:1,fb:'R-: la autolesiÃ³n RETIRA un estado emocional aversivo (vacÃ­o) â†’ la conducta AUMENTA. El alivio del dolor emocional refuerza la conducta.'},
{text:'Â¿CuÃ¡l serÃ­a una intervenciÃ³n coherente con este anÃ¡lisis funcional?',opts:['Castigar la autolesiÃ³n para que disminuya','EnseÃ±ar formas alternativas de reducir el malestar emocional (habilidades de regulaciÃ³n) ğŸ› ï¸','Ignorar la conducta para extinguirla','Medicar exclusivamente'],c:1,fb:'Si la funciÃ³n es R- (aliviar malestar), necesitamos ALTERNATIVAS funcionales que cumplan la misma funciÃ³n sin daÃ±o: tÃ©cnicas de regulaciÃ³n emocional, mindfulness, activaciÃ³n conductual.'}]},
{type:'seq',skill:'caso_co',patient:{name:'Pablo',age:'8 aÃ±os',gender:'m',initial:'P',badge:'Rabietas selectivas ğŸ˜¤'},quote:'"Pablo solo hace rabietas con su abuela. Con nosotros no se atreve porque no cedemos. Pero la abuela siempre acaba dÃ¡ndole lo que quiere para que se calle."',questions:[
{text:'Que Pablo haga rabietas SOLO con la abuela demuestra que su conducta estÃ¡ bajo...',opts:['GeneralizaciÃ³n','Control de estÃ­mulos: la abuela es Ed+ para rabietas ğŸ”¦','IndefensiÃ³n aprendida','IncubaciÃ³n'],c:1,fb:'DiscriminaciÃ³n operante: Pablo ha aprendido que con abuela (Ed+) â†’ rabieta â†’ consigue lo que quiere. Con padres (Ed-) â†’ rabieta â†’ no funciona. Su conducta estÃ¡ bajo control de estÃ­mulos.'},
{text:'La abuela que cede "para que se calle" estÃ¡ sometida a un procedimiento de...',opts:['Castigo positivo','Reforzamiento positivo','Reforzamiento negativo (ceder retira el ruido aversivo de la rabieta) ğŸ”“','ExtinciÃ³n'],c:2,fb:'ğŸ¯ Â¡Doble anÃ¡lisis! La ABUELA tambiÃ©n estÃ¡ sometida a R-: el grito del niÃ±o es aversivo â†’ ceder lo retira â†’ ceder AUMENTA. Las rabietas del niÃ±o son R+ Y un Ed para el R- de la abuela. Â¡Todo es funcional!'}]},
{type:'single',skill:'caso_co',text:'ğŸ§’ Tres niÃ±os lloran en clase. NiÃ±o A: llora â†’ atenciÃ³n de la profe. NiÃ±a B: llora â†’ la sacan de clase. NiÃ±o C: llora â†’ madre viene a recogerle. Los tres lloran mÃ¡s. Â¿QuÃ© demuestra esto?',opts:['Que el llanto es innato y no se puede modificar','Que la misma topografÃ­a puede tener diferentes funciones ğŸ”','Que todos son reforzamiento positivo','Que todos necesitan la misma intervenciÃ³n'],c:1,ok:'La misma conducta (llorar) puede mantenerse por R+ (atenciÃ³n), R- (escapar) o R- (evitar). La intervenciÃ³n DEBE basarse en la funciÃ³n, no en la forma.',fail:'ğŸ”‘ TopografÃ­a = cÃ³mo se ve. FunciÃ³n = quÃ© consigue. Misma topografÃ­a â‰  misma funciÃ³n â‰  misma intervenciÃ³n.'},
{type:'single',skill:'caso_co',text:'ğŸ¥ Un terapeuta quiere reducir las quejas constantes de un paciente en sesiÃ³n. Antes, cada queja recibÃ­a "quÃ© difÃ­cil" (atenciÃ³n). Ahora el terapeuta ignora las quejas y atiende cuando el paciente habla de soluciones. Â¿QuÃ© combina?',opts:['Castigo positivo de quejas + R+ de soluciones','ExtinciÃ³n de quejas + R+ de soluciones (reforzamiento diferencial) âœ…','R- de quejas + C- de soluciones','Solo extinciÃ³n'],c:1,ok:'ExtinciÃ³n de quejas (eliminar atenciÃ³n como C) + R+ de alternativas (atender cuando habla de soluciones). Esto es reforzamiento diferencial: extinguir lo problemÃ¡tico y reforzar lo alternativo.',fail:'ğŸ”‘ Reforzamiento diferencial = extinguir la conducta problema + reforzar una conducta alternativa incompatible.'}
]}
]};


// ========== ENGINE ==========
$a=document.getElementById('app');MOD=MODULE;S.mod='m5';loadP();
function go(v,o){Object.assign(S,o||{},{view:v});if(v==='exercise'){S.answers={};S.seqIdx=0;streak=0;const l=MOD.levels[S.level];S.pool=shuffle([...Array(l.exercises.length).keys()]).slice(0,l.showCount||l.exercises.length);S.exIdx=0}S.tpOpen=false;saveP();render()}
function render(){const v=S.view;if(v==='home')rHome();else if(v==='theory')rTheory();else if(v==='exercise')rEx();else if(v==='gate')rGate();else if(v==='level-sum')rLSum();else if(v==='mod-sum')rMSum();requestAnimationFrame(()=>{const c=$a.querySelector('.cnt');if(c)c.scrollTop=0})}
function getBase(){const p=window.location.pathname;const idx=p.indexOf('/modulo-');return idx!==-1?p.substring(0,idx+1):p.substring(0,p.lastIndexOf('/')+1)}
function topH(t,s,back,prog){let p='';if(prog!==undefined)p=`<div class="top-prog"><div class="top-prog-bar"><div class="top-prog-fill" style="width:${prog}%"></div></div><div class="top-prog-pct">${Math.round(prog)}%</div></div>`;const tb=S.view==='exercise'?`<div class="top-btn" onclick="togTP()" title="TeorÃ­a">${IC.book}</div>`:'';const sk=S.view==='exercise'&&streak>=3?`<span class="streak">ğŸ”¥ Ã—${streak}</span>`:'';return `<div class="top"><div class="top-back" onclick="${back}" tabindex="0">${IC.back}</div><div style="flex:1;min-width:0"><div class="top-t">${t}${sk}</div><div class="top-s">${s}</div></div>${p}<div class="top-acts">${tb}<div class="top-btn" onclick="togDk()">${isDk()?IC.sun:IC.moon}</div></div></div>`}
function tpHTML(){if(!MOD||!MOD.levels[S.level])return '';const l=MOD.levels[S.level];let items='';(l.theory||[]).forEach(t=>{items+=`<div class="acc open"><div class="acc-h" onclick="this.parentElement.classList.toggle('open')"><div class="acc-i" style="background:var(--accent-g)">${t.icon||'ğŸ“–'}</div><div class="acc-l">${t.title}</div><div class="acc-a">â–¼</div></div><div class="acc-b"><div class="acc-in prose">${t.body}</div></div></div>`});return `<div class="tp-overlay${S.tpOpen?' open':''}" onclick="togTP()"></div><div class="tp${S.tpOpen?' open':''}"><button class="tp-close" onclick="togTP()">${IC.x}</button><div class="tag tag-b" style="margin-bottom:12px">ğŸ“– Referencia teÃ³rica</div>${items}</div>`}
function togTP(){S.tpOpen=!S.tpOpen;const p=$a.querySelector('.tp'),o=$a.querySelector('.tp-overlay');if(p)p.classList.toggle('open',S.tpOpen);if(o)o.classList.toggle('open',S.tpOpen)}
function rHome(){const m=MOD;let levels='';m.levels.forEach((l,i)=>{const done=isLD(i),unl=i===0||isLD(i-1),cls=done?'done':(!unl?'locked':'');const sc=P.scores[`l${i}`];let mbar='';if(sc){const p=Math.round((sc.correct/sc.total)*100);mbar=`<div class="lbar"><div class="lbar-f" style="width:${p}%;background:${p>=80?'var(--green)':(p>=50?'var(--gold)':'var(--red)')}"></div></div>`}levels+=`<div class="lcard ${cls}" onclick="${unl?`go('theory',{level:${i}})`:'void(0)'}"><div class="lcard-icon" style="background:${done?'var(--green-g)':`linear-gradient(135deg,${LVL_C[i]},${LVL_C[i]}22)`}">${done?'âœ…':LVL_E[i]}</div><div style="flex:1"><div class="lcard-name">${LVL_N[i]}</div><div class="lcard-sub">${l.title} Â· ${l.exercises.length} ej.</div>${mbar}</div><div class="lcard-arrow">â€º</div></div>`});const tl=m.levels.length;let dl=0;for(let i=0;i<tl;i++)if(isLD(i))dl++;const pct=Math.round((dl/tl)*100);
$a.innerHTML=`${topH(m.phase,m.title,"window.location.href=getBase()+'index.html'")}
<div class="cnt"><div class="anim" style="text-align:center;margin-bottom:16px"><div style="font-size:52px;margin-bottom:8px">${m.icon}</div><div class="card-t" style="font-size:26px">${m.title}</div><div class="card-d" style="max-width:360px;margin:6px auto 0">${m.description}</div></div><div style="display:flex;align-items:center;justify-content:center;gap:20px;margin-bottom:16px" class="anim d1"><div class="ring"><svg width="80" height="80"><circle cx="40" cy="40" r="33" fill="none" stroke="var(--border)" stroke-width="5"/><circle cx="40" cy="40" r="33" fill="none" stroke="var(--gold)" stroke-width="5" stroke-dasharray="${2*Math.PI*33}" stroke-dashoffset="${2*Math.PI*33*(1-pct/100)}" stroke-linecap="round"/></svg><div class="ring-v">${pct}%</div></div><div><div style="border:none;padding:4px 0"><b style="font-family:'Space Mono',monospace;font-size:24px;color:var(--bright);display:block">${dl}/${tl}</b><span style="font-size:11px;color:var(--dim);text-transform:uppercase;letter-spacing:.5px">Niveles</span></div></div></div><div style="font-family:'Space Mono',monospace;font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);margin:16px 0 8px" class="anim d2">Niveles del mÃ³dulo</div><div class="anim d3">${levels}</div></div>`}
function isLD(i){const sc=P.scores[`l${i}`];return sc&&(sc.correct/sc.total)>=MASTERY}
function rTheory(){const l=MOD.levels[S.level];let acc='';(l.theory||[]).forEach((t,i)=>{acc+=`<div class="acc ${i===0?'open':''}" onclick="this.classList.toggle('open')"><div class="acc-h"><div class="acc-i" style="background:var(--${t.color||'accent'}-g)">${t.icon||'ğŸ“–'}</div><div class="acc-l">${t.title}</div><div class="acc-a">â–¼</div></div><div class="acc-b"><div class="acc-in prose">${t.body}</div></div></div>`});$a.innerHTML=`${topH(`Nivel ${S.level+1}`,l.title,"go('home')")}<div class="cnt"><div class="anim"><div class="card"><div class="tag tag-b">${LVL_E[S.level]} Nivel ${S.level+1} â€” ${LVL_N[S.level]}</div><div class="card-t">${l.title}</div><div class="card-d">${l.description||''}</div></div>${acc}</div></div><div class="bot"><button class="btn btn-p" onclick="go('exercise')">Comenzar ejercicios â€º</button></div>`}
function rEx(){const l=MOD.levels[S.level],pi=S.pool[S.exIdx],ex=l.exercises[pi],total=S.pool.length;let ft=0,fc=0;S.pool.forEach((p,i)=>{const e=l.exercises[p];const c=e.type==='seq'?e.questions.length:(e.type==='classify'?e.items.length:1);if(i<S.exIdx)fc+=c;else if(i===S.exIdx)fc+=S.seqIdx;ft+=c});let pips='<div class="pips">';S.pool.forEach((p,i)=>{const e=l.exercises[p];const c=e.type==='seq'?e.questions.length:(e.type==='classify'?e.items.length:1);for(let s=0;s<c;s++){const k=`${i}-${s}`,a=S.answers[k];let cl=i===S.exIdx&&s===S.seqIdx?'cur':(a===true?'ok':(a===false?'fail':''));pips+=`<div class="pip ${cl}"></div>`}});pips+='</div>';const prog=ft?Math.round(fc/ft*100):0;let body='';if(ex.type==='tf')body=mkTF(ex);else if(ex.type==='single')body=mkSingle(ex);else if(ex.type==='classify')body=mkCl(ex);else if(ex.type==='seq')body=mkSeq(ex);else if(ex.type==='match')body=mkMat(ex);else if(ex.type==='order')body=mkOrder(ex);else if(ex.type==='fill')body=mkFill(ex);$a.innerHTML=`${topH(`Nivel ${S.level+1}`,l.title,"go('home')",prog)}<div class="cnt">${pips}<div id="exW" class="anim">${body}</div></div><div class="bot" id="botB"></div>${tpHTML()}`}
function curK(){return `${S.exIdx}-${S.seqIdx}`}function curE(){return MOD.levels[S.level].exercises[S.pool[S.exIdx]]}
function rec(ok,ex){S.answers[curK()]=ok;if(ok)streak++;else streak=0;if(ex&&ex.skill){if(!P.skills[ex.skill])P.skills[ex.skill]={c:0,t:0};P.skills[ex.skill].t++;if(ok)P.skills[ex.skill].c++}if(!ok&&ex){if(!P.errors[S.level])P.errors[S.level]=[];const q=ex.text||ex.s||(ex.questions?ex.questions[S.seqIdx]?.text:'')||'';const c=typeof ex.c==='number'&&ex.opts?ex.opts[ex.c]:'';P.errors[S.level].push({q:q.substring(0,100),a:(typeof c==='string'?c:'').substring(0,100)})}saveP()}
function showNext(){const b=$('botB');if(b)b.innerHTML=`<button class="btn btn-p" onclick="nextEx()">Siguiente â€º</button>`}
function showFB(ok,t,ex){const f=$('fb');if(!f)return;f.className=`fb show ${ok?'fbok':'fbfail'}`;let extra='';if(ok&&ex&&ex.bonus)extra=`<div class="fb-bonus">ğŸ’¡ ${ex.bonus}</div>`;if(!ok&&ex&&ex.fail&&ex.fail.startsWith('ğŸ”‘'))extra=`<div class="fb-rule">${ex.fail}</div>`;else if(!ok)extra=`<div class="fb-rule">ğŸ”‘ ${t}</div>`;f.innerHTML=`<strong>${ok?'âœ… Â¡Correcto!':'âŒ Incorrecto'}</strong>${ok?t:''}${extra}`;if(!ok){const w=$('exW');if(w){w.classList.add('shake');setTimeout(()=>w.classList.remove('shake'),400)}}}
// === TF ===
function mkTF(ex){return `<div class="card"><div class="q-h"><span class="q-type">âš¡</span><span class="q-tag">V / F</span><span class="q-n">${S.exIdx+1}/${S.pool.length}</span></div><div class="q-text">${ex.s}</div><div class="tf"><div class="tf-b" id="tfV" onclick="chkTF(true)">âœ“ Verdadero</div><div class="tf-b" id="tfF" onclick="chkTF(false)">âœ— Falso</div></div><div class="fb" id="fb"></div></div>`}
function chkTF(v){const ex=curE(),ok=v===ex.c;$('tf'+(v?'V':'F')).classList.add(ok?'ok':'bad','dis');$('tf'+(v?'F':'V')).classList.add('dis');if(!ok)$(ex.c?'tfV':'tfF').classList.add('ok');showFB(ok,ok?ex.ok:ex.fail,ex);rec(ok,ex);showNext()}
// === SINGLE ===
function mkSingle(ex){let o='';ex.opts.forEach((t,i)=>{o+=`<div class="opt" id="so${i}" onclick="chkS(${i})"><div class="opt-m">${String.fromCharCode(65+i)}</div><div class="opt-t">${t}</div></div>`});return `<div class="card"><div class="q-h"><span class="q-type">ğŸ¯</span><span class="q-tag">SelecciÃ³n</span><span class="q-n">${S.exIdx+1}/${S.pool.length}</span></div>${ex.context?`<div class="q-ctx">${ex.context}</div>`:''}<div class="q-text">${ex.text}</div>${o}<div class="fb" id="fb"></div></div>`}
function chkS(i){const ex=curE(),ok=i===ex.c;document.querySelectorAll('.opt').forEach((o,j)=>{o.classList.add('dis');if(j===i)o.classList.add(ok?'ok':'bad');if(j===ex.c&&!ok)o.classList.add('rev')});showFB(ok,ok?ex.ok:ex.fail,ex);rec(ok,ex);showNext()}
// === CLASSIFY ===
function mkCl(ex){const it=ex.items[S.seqIdx];let c='<div class="cl-cats">';ex.categories.forEach(cat=>{c+=`<div class="cl-c" onclick="chkCl(this.dataset.cat)" data-cat="${cat}">${cat}</div>`});c+='</div>';return `<div class="card"><div class="q-h"><span class="q-type">ğŸ“‚</span><span class="q-tag">Clasifica</span><span class="q-n">${S.seqIdx+1}/${ex.items.length}</span></div><div class="q-text">"${it.text}"</div>${c}<div class="fb" id="fb"></div></div>`}
function chkCl(cat){const ex=curE(),it=ex.items[S.seqIdx],ok=cat===it.cat;document.querySelectorAll('.cl-c').forEach(c=>{c.classList.add('dis');if(c.dataset.cat===it.cat)c.classList.add('ok');else if(c.dataset.cat===cat&&!ok)c.classList.add('bad')});showFB(ok,ok?`"${it.text}" â†’ ${it.cat} ğŸ¯`:it.cat,ex);S.answers[curK()]=ok;if(ok)streak++;else{streak=0;if(!P.errors[S.level])P.errors[S.level]=[];P.errors[S.level].push({q:it.text.substring(0,80),a:it.cat})}saveP();setTimeout(()=>{if(S.seqIdx<ex.items.length-1){S.seqIdx++;render()}else{S.seqIdx=0;advEx()}},1400)}
// === SEQ (cases) ===
function mkSeq(ex){const q=ex.questions[S.seqIdx];let o='';q.opts.forEach((t,i)=>{o+=`<div class="opt" id="sq${i}" onclick="chkSq(${i})"><div class="opt-m">${String.fromCharCode(65+i)}</div><div class="opt-t">${t}</div></div>`});let ph='';if(ex.patient){const p=ex.patient;ph=`<div class="pat"><div class="pat-h"><div class="pat-av ${p.gender}">${p.initial}</div><div><div class="pat-name">${p.name}</div><div class="pat-age">${p.age}</div></div><div class="pat-badge">${p.badge}</div></div><div class="pat-q">${ex.quote}</div></div>`}return `${ph}<div class="card"><div class="q-h"><span class="q-type">ğŸ¥</span><span class="q-tag">Caso</span><span class="q-n">${S.seqIdx+1}/${ex.questions.length}</span></div><div class="q-text">${q.text}</div>${o}<div class="fb" id="fb"></div></div>`}
function chkSq(i){const ex=curE(),q=ex.questions[S.seqIdx],ok=i===q.c;document.querySelectorAll('.opt').forEach((o,j)=>{o.classList.add('dis');if(j===i)o.classList.add(ok?'ok':'bad');if(j===q.c&&!ok)o.classList.add('rev')});showFB(ok,q.fb,ex);S.answers[curK()]=ok;if(ok)streak++;else{streak=0;if(!P.errors[S.level])P.errors[S.level]=[];P.errors[S.level].push({q:q.text.substring(0,80),a:q.opts[q.c].substring(0,80)})}saveP();const b=$('botB');if(b){const last=S.seqIdx>=ex.questions.length-1;b.innerHTML=`<button class="btn btn-p" onclick="seqN(${last})">${last?'Siguiente â€º':'Siguiente pregunta â€º'}</button>`}}
function seqN(last){if(last){S.seqIdx=0;advEx()}else{S.seqIdx++;render()}}
// === MATCH ===
let _mL=null,_mC=0;function mkMat(ex){_mL=null;_mC=0;const ls=shuffle(ex.pairs.map((p,i)=>({...p,idx:i}))),rs=shuffle(ex.pairs.map((p,i)=>({...p,idx:i})));let l='<div class="mat-c">';ls.forEach(p=>{l+=`<div class="mat-i" id="ml${p.idx}" onclick="matL(${p.idx})">${p.left}</div>`});l+='</div>';let r='<div class="mat-c">';rs.forEach(p=>{r+=`<div class="mat-i" id="mr${p.idx}" onclick="matR(${p.idx})">${p.right}</div>`});r+='</div>';return `<div class="card"><div class="q-h"><span class="q-type">ğŸ”—</span><span class="q-tag">Empareja</span><span class="q-n">${S.exIdx+1}/${S.pool.length}</span></div><div class="q-text">${ex.text}</div><div class="mat-w">${l}${r}</div><div class="fb" id="fb"></div></div>`}
function matL(i){document.querySelectorAll('.mat-c:first-child .mat-i').forEach(m=>m.classList.remove('sel'));$('ml'+i).classList.add('sel');_mL=i}
function matR(i){if(_mL===null)return;const ok=_mL===i,ml=$('ml'+_mL),mr=$('mr'+i);if(ml)ml.classList.add(ok?'ok':'bad','dis');if(mr)mr.classList.add(ok?'ok':'bad','dis');if(!ok){setTimeout(()=>{if(ml){ml.classList.remove('bad','dis')}if(mr){mr.classList.remove('bad','dis')}},800)}else{_mC++;const ex=curE();if(_mC===ex.pairs.length){showFB(true,ex.ok||'âœ… Todos correctos.',ex);rec(true,ex);showNext()}}_mL=null;document.querySelectorAll('.mat-i').forEach(m=>m.classList.remove('sel'))}
// === ORDER (NEW!) ===
let _ordSeq=[],_ordDone=false;
function mkOrder(ex){_ordSeq=[];_ordDone=false;const shuffled=shuffle(ex.items.map((t,i)=>({t,i})));let bank='<div class="ord-bank">';shuffled.forEach((it,si)=>{bank+=`<div class="ord-item" id="oi${it.i}" onclick="ordPick(${it.i})">${it.t}</div>`});bank+='</div>';let slots='<div class="ord-seq" id="ordSeq"></div>';return `<div class="card"><div class="q-h"><span class="q-type">ğŸ“‹</span><span class="q-tag">Ordena</span><span class="q-n">${S.exIdx+1}/${S.pool.length}</span></div><div class="q-text">${ex.text}</div>${slots}${bank}<div class="fb" id="fb"></div></div>`}
function ordPick(i){if(_ordDone)return;const ex=curE(),step=_ordSeq.length,ok=i===step;const seq=$('ordSeq');const item=$('oi'+i);if(!item||!seq)return;if(ok){item.classList.add('placed');_ordSeq.push(i);seq.innerHTML+=`<div class="ord-slot ok"><div class="ord-num">${step+1}</div>${ex.items[i]}</div>`;if(_ordSeq.length===ex.items.length){_ordDone=true;showFB(true,ex.ok,ex);rec(true,ex);showNext()}}else{item.classList.add('placed');seq.innerHTML+=`<div class="ord-slot bad"><div class="ord-num">âœ—</div>${ex.items[i]}</div>`;_ordDone=true;setTimeout(()=>{seq.innerHTML='';ex.items.forEach((t,j)=>{seq.innerHTML+=`<div class="ord-slot ok"><div class="ord-num">${j+1}</div>${t}</div>`})},1200);showFB(false,ex.fail,ex);rec(false,ex);document.querySelectorAll('.ord-item').forEach(o=>o.classList.add('dis'));showNext()}}
// === FILL (NEW!) ===
let _fillState=[],_fillSel=null,_fillDone=false;
function mkFill(ex){_fillState=new Array(ex.blanks.length).fill(null);_fillSel=null;_fillDone=false;let diag=ex.diagram;ex.blanks.forEach((b,i)=>{diag=diag.replace(`{${i}}`,`<span class="fill-blank" id="fb${i}" onclick="fillBlankClick(${i})">${b.length>3?'___':'___'}</span>`)});const opts=shuffle([...ex.options]);let bank='<div class="fill-bank">';opts.forEach((o,i)=>{bank+=`<div class="fill-opt" id="fo${i}" data-val="${o}" onclick="fillOptClick(${i},'${o.replace(/'/g,"\\'")}')">${o}</div>`});bank+='</div>';return `<div class="card"><div class="q-h"><span class="q-type">ğŸ§©</span><span class="q-tag">Completa</span><span class="q-n">${S.exIdx+1}/${S.pool.length}</span></div><div class="q-text">${ex.text}</div><div class="fill-diag" id="fillDiag">${diag}</div>${bank}<div style="text-align:center;margin-top:8px"><button class="btn btn-p btn-sm" id="fillCheck" onclick="fillCheck()" disabled>Comprobar âœ“</button></div><div class="fb" id="fb"></div></div>`}
function fillOptClick(i,val){if(_fillDone)return;const opt=$('fo'+i);if(!opt||opt.classList.contains('used'))return;const emptyIdx=_fillState.indexOf(null);if(emptyIdx===-1)return;_fillState[emptyIdx]=val;opt.classList.add('used');const blank=$('fb'+emptyIdx);if(blank){blank.textContent=val;blank.classList.add('filled')}if(!_fillState.includes(null)){const cb=$('fillCheck');if(cb)cb.disabled=false}}
function fillBlankClick(i){if(_fillDone||_fillState[i]===null)return;const val=_fillState[i];_fillState[i]=null;const blank=$('fb'+i);if(blank){blank.textContent='___';blank.classList.remove('filled')}document.querySelectorAll('.fill-opt').forEach(o=>{if(o.dataset.val===val&&o.classList.contains('used')){o.classList.remove('used');return}});const cb=$('fillCheck');if(cb)cb.disabled=true}
function fillCheck(){if(_fillDone)return;_fillDone=true;const ex=curE();let allOk=true;ex.blanks.forEach((correct,i)=>{const blank=$('fb'+i);if(_fillState[i]===correct){if(blank)blank.classList.add('ok')}else{allOk=false;if(blank){blank.classList.add('bad');setTimeout(()=>{blank.textContent=correct;blank.classList.remove('bad');blank.classList.add('ok')},1200)}}});document.querySelectorAll('.fill-opt').forEach(o=>o.classList.add('dis'));$('fillCheck').disabled=true;showFB(allOk,allOk?ex.ok:ex.fail,ex);rec(allOk,ex);showNext()}
// === NAV ===
function advEx(){if(S.exIdx<S.pool.length-1){S.exIdx++;S.seqIdx=0;render()}else{let c=0,t=0;for(const[k,v]of Object.entries(S.answers)){if(typeof v==='boolean'){t++;if(v)c++}}P.scores[`l${S.level}`]={correct:c,total:t};saveP();const p=t?c/t:0;if(p>=MASTERY){fireConfetti();go('level-sum')}else{go('gate')}}}
function nextEx(){const ex=curE();if(ex.type==='classify'||ex.type==='seq')return;advEx()}
function rGate(){const sc=P.scores[`l${S.level}`],pct=sc?Math.round((sc.correct/sc.total)*100):0,need=Math.ceil(sc.total*MASTERY);let errs='';const el=P.errors[S.level]||[];const seen=new Set;el.forEach(e=>{if(!seen.has(e.q)&&seen.size<5){seen.add(e.q);errs+=`<div class="rev"><div class="rev-q">${e.q}</div><div class="rev-a">âœ“ ${e.a}</div></div>`}});$a.innerHTML=`${topH(`Nivel ${S.level+1}`,MOD.levels[S.level].title,"go('home')")}<div class="cnt"><div class="gate anim"><div class="gate-ic">ğŸ”’</div><div class="gate-t">Criterio no alcanzado</div><div class="gate-d">Necesitas <strong>â‰¥80%</strong> (${need}/${sc.total}) para avanzar. Obtuviste ${sc.correct}/${sc.total}.</div><div class="gate-bar"><div class="gate-bar-f" style="width:${pct}%;background:${pct>=80?'var(--green)':(pct>=50?'var(--gold)':'var(--red)')}"></div></div><div class="gate-sc" style="color:${pct>=50?'var(--gold)':'var(--red)'}">${pct}%</div>${errs?'<div style="font-family:\'Space Mono\',monospace;font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin:12px 0 6px">ğŸ“ Revisar</div>'+errs:''}</div></div><div class="bot"><button class="btn btn-o" onclick="go('home')">â† MÃ³dulo</button><button class="btn btn-w" onclick="retryLvl()">ğŸ”„ Reintentar</button></div>`}
function retryLvl(){delete P.scores[`l${S.level}`];P.errors[S.level]=[];saveP();go('exercise')}
function rLSum(){const sc=P.scores[`l${S.level}`],pct=sc?Math.round((sc.correct/sc.total)*100):0,cls=pct>=80?'great':(pct>=50?'mid':'low');const l=MOD.levels[S.level],hasN=S.level<MOD.levels.length-1;let sk=renderSk(),er=renderEr(),ch='';if(l.cheat){ch=`<div class="cheat"><div class="cheat-t">ğŸ“‹ Conceptos clave</div>`;l.cheat.forEach(c=>{ch+=`<div class="cheat-i">â€¢ ${c}</div>`});ch+='</div>'}$a.innerHTML=`${topH(`Nivel ${S.level+1}`,'Resultados',"go('home')")}<div class="cnt" style="text-align:center"><div class="anim"><div class="sum-c ${cls}"><div class="sum-n">${sc.correct}</div><div class="sum-t">de ${sc.total}</div></div><div class="sum-msg">${pct>=90?'ğŸŒŸ Â¡Excelente!':(pct>=80?'âœ… Â¡Nivel superado!':'ğŸ’ª Buen progreso')}</div><div class="sum-sub">${LVL_N[S.level]}: ${l.title} â€” ${pct}%</div></div><div style="text-align:left" class="anim d1">${sk}</div><div style="text-align:left" class="anim d2">${er}</div><div style="text-align:left" class="anim d3">${ch}</div></div><div class="bot"><button class="btn btn-icon btn-o" onclick="retryLvl()">${IC.refresh}</button>${hasN?`<button class="btn btn-p" onclick="go('theory',{level:${S.level+1}})">Nivel ${S.level+2} â€º</button>`:`<button class="btn btn-g" onclick="go('mod-sum')">Resumen â€º</button>`}</div>`}
function rMSum(){let tc=0,tt=0,rows='';MOD.levels.forEach((l,i)=>{const sc=P.scores[`l${i}`];if(sc){tc+=sc.correct;tt+=sc.total;const p=Math.round((sc.correct/sc.total)*100);rows+=`<div style="display:flex;align-items:center;gap:8px;padding:8px 0;border-bottom:1px solid var(--border2)"><span style="font-size:16px">${p>=80?'âœ…':(p>=50?'ğŸŸ¡':'ğŸ”´')}</span><span style="flex:1;font-size:14px">${LVL_N[i]}: ${l.title}</span><span style="font-family:'Space Mono',monospace;font-size:13px;font-weight:700;color:${p>=80?'var(--green)':(p>=50?'var(--gold)':'var(--red)')}">${p}%</span></div>`}});const pct=tt?Math.round((tc/tt)*100):0;$a.innerHTML=`${topH(MOD.phase,MOD.title,"go('home')")}<div class="cnt" style="text-align:center"><div class="anim"><div style="font-size:48px;margin-bottom:6px">${pct>=80?'ğŸ‰':'ğŸ’ª'}</div><div class="sum-c ${pct>=80?'great':(pct>=50?'mid':'low')}"><div class="sum-n">${tc}</div><div class="sum-t">de ${tt}</div></div><div class="sum-msg">${pct>=80?'Â¡MÃ³dulo completado!':'Sigue practicando'}</div><div class="sum-sub">${MOD.title} â€” ${pct}%</div></div><div class="card anim d1" style="text-align:left">${rows}</div><div style="text-align:left" class="anim d2">${renderSk()}</div></div><div class="bot"><button class="btn btn-o" onclick="window.location.href=getBase()+'index.html'">â† Plataforma</button></div>`}
function renderSk(){const sk=P.skills,ks=Object.keys(sk);if(!ks.length)return '';let h='<div style="font-family:\'Space Mono\',monospace;font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin:12px 0 6px">ğŸ“Š Habilidades</div><div class="sk-grid">';ks.forEach(k=>{const s=sk[k],p=s.t?Math.round((s.c/s.t)*100):0,c=p>=80?'var(--green)':(p>=50?'var(--gold)':'var(--red)');h+=`<div class="sk-r"><span class="sk-name">${k.replace(/_/g,' ').replace(/\b\w/g,l=>l.toUpperCase())}</span><div class="sk-bar"><div class="sk-bar-f" style="width:${p}%;background:${c}"></div></div><span class="sk-pct" style="color:${c}">${p}%</span></div>`});return h+'</div>'}
function renderEr(){const e=P.errors[S.level];if(!e||!e.length)return '';let h='<div style="font-family:\'Space Mono\',monospace;font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--muted);margin:12px 0 6px">âŒ Revisar</div>';const seen=new Set;e.forEach(x=>{if(!seen.has(x.q)&&seen.size<6){seen.add(x.q);h+=`<div class="rev"><div class="rev-q">${x.q}</div><div class="rev-a">âœ“ ${x.a}</div></div>`}});return h}
render();
</script>
</body>
</html>
